!function(){"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,n(o.key),o)}}function n(e){var n=function(e){if("object"!=t(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=t(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==t(n)?n:n+""}var r=function(){return t=function t(e,r,o,i,a,u,c){var l,s,f,p=e.name,d=e.link,y=e._id,m=e.isLiked;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),l=this,f=void 0,(s=n(s="$"))in l?Object.defineProperty(l,s,{value:f,enumerable:!0,configurable:!0,writable:!0}):l[s]=f,this._name=p,this._link=d,this._id=y,this._isLiked=m,this._cardSelector=r,this._confirmPopup=a,this._handleImageClick=o,this._handleDeleteClick=i,this._handleLikeCard=u,this._handleUnlikeCard=c},(r=[{key:"_getID",value:function(){return console.log("Getting ID:",this._id),this._id}},{key:"_getTemplate",value:function(){return document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0)}},{key:"_setEventListeners",value:function(){var t=this;this._likeButton=this._element.querySelector(".card__like-button"),this._cardImage=this._element.querySelector(".card__image"),this._trashButton=this._element.querySelector(".card__delete-button"),this._isLiked&&this._likeButton.classList.add("card__like-button_active"),this._likeButton&&this._likeButton.addEventListener("click",(function(){t._handleLikeCard(t._getID(),t._likeButton)})),this._trashButton&&this._trashButton.addEventListener("click",(function(){var e=t._getID();console.log("Trash Button: Opening confirm popup for ID:",e),console.log("Trash Button: Card element:",t._element),t._confirmPopup.open(t._id,t._element)}))}},{key:"_handleLikeCard",value:function(){var t=this;console.log("Liking card with ID: ".concat(this._getID)),api.likeCard(this._getID()).then((function(){return t._likeButton.classList.add("card__like-button_active")})),api.getCardById(this._id).then((function(t){console.log("Fetched updated card data:",t)})).catch((function(t){return console.error("Error liking card:",t)}))}},{key:"_handleUnlikeCard",value:function(){var t=this;console.log("Unliking card with ID: ".concat(this._getID)),api.dislikeCard(this._getID()).then((function(){return t._likeButton.classList.remove("card__like-button_active")})).catch((function(t){return console.error("Error unliking card:",t)}))}},{key:"_handleDeleteButton",value:function(){console.log("Deleting Card ID:",this._getID()),this._handleDeleteClick(this._getID(),this._element)}},{key:"createCard",value:function(){var t=this;this._element=this._getTemplate(),this._element.querySelector(".card__title").textContent=this._name;var e=this._element.querySelector(".card__image");return e.addEventListener("click",(function(){t._handleImageClick(t._link,t._name)})),e.src=this._link,e.alt=this._name,this._setEventListeners(),this._element}}])&&e(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r}(),o=r;function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,c(r.key),r)}}function u(t,e,n){return(e=c(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function c(t){var e=function(t){if("object"!=i(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==i(e)?e:e+""}var l=function(){return t=function t(e,n){var r=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),u(this,"toggleButtonState",(function(){r._hasInvalidInput()?r.disableButton():(r._submitButton.classList.remove(r._settings.inactiveButtonClass),r._submitButton.disabled=!1)})),u(this,"disableButton",(function(){r._submitButton.classList.add(r._settings.inactiveButtonClass),r._submitButton.disabled=!0})),this._settings=e,this._formElement=n,this._inputList=Array.from(this._formElement.querySelectorAll(this._settings.inputSelector)),this._submitButton=this._formElement.querySelector(this._settings.submitButtonSelector)},(e=[{key:"enableValidation",value:function(){this._setEventListeners()}},{key:"_setEventListeners",value:function(){var t=this;this._inputList.forEach((function(e){e.addEventListener("input",(function(){t._checkInputValidity(e),t.toggleButtonState()}))})),this.toggleButtonState()}},{key:"_checkInputValidity",value:function(t){t.validity.valid?this._hideInputError(t):this._showInputError(t,t.validationMessage)}},{key:"_showInputError",value:function(t,e){var n=this._formElement.querySelector("#".concat(t.id,"-error"));t.classList.add(this._settings.inputErrorClass),n.textContent=e,n.classList.add(this._settings.errorClass)}},{key:"_hideInputError",value:function(t){var e=this._formElement.querySelector("#".concat(t.id,"-error"));t.classList.remove(this._settings.inputErrorClass),e.classList.remove(this._settings.errorClass),e.textContent=""}},{key:"_hasInvalidInput",value:function(){return this._inputList.some((function(t){return!t.validity.valid}))}},{key:"resetValidation",value:function(){var t=this;this._inputList.forEach((function(e){t._hideInputError(e)})),this.toggleButtonState()}}])&&a(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}(),s=l;function f(t){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},f(t)}function p(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,d(r.key),r)}}function d(t){var e=function(t){if("object"!=f(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=f(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==f(e)?e:e+""}var y=function(){return t=function t(e,n){var r=e.items,o=e.renderer;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._items=r,this.renderer=o,this._container=document.querySelector(n)},(e=[{key:"renderItems",value:function(){var t=this;this._items.forEach((function(e){t.renderer(e)}))}},{key:"addItem",value:function(t){this._container.prepend(t)}}])&&p(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function m(t){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},m(t)}function v(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,b(r.key),r)}}function b(t){var e=function(t){if("object"!=m(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=m(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==m(e)?e:e+""}var h=function(){return t=function t(e){var n=e.popupSelector;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._popupElement=document.querySelector(n),this._handleEscClose=this._handleEscClose.bind(this)},(e=[{key:"open",value:function(){console.log("Opening modal:",this._popupElement),this._popupElement.classList.add("modal_opened"),document.addEventListener("keydown",this._handleEscClose)}},{key:"close",value:function(){this._popupElement.classList.remove("modal_opened"),document.removeEventListener("keydown",this._handleEscClose)}},{key:"_handleEscClose",value:function(t){"Escape"===t.key&&this.close()}},{key:"setEventListeners",value:function(){var t=this;this._popupElement.addEventListener("mousedown",(function(e){(e.target.classList.contains("modal__overlay")||e.target.classList.contains("modal__close"))&&t.close()}))}}])&&v(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function _(t){return _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_(t)}function g(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,S(r.key),r)}}function S(t){var e=function(t){if("object"!=_(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=_(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==_(e)?e:e+""}function k(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(k=function(){return!!t})()}function E(){return E="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!{}.hasOwnProperty.call(t,e)&&null!==(t=w(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},E.apply(null,arguments)}function w(t){return w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},w(t)}function j(t,e){return j=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},j(t,e)}var O=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=function(t,e,n){return e=w(e),function(t,e){if(e&&("object"==_(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,k()?Reflect.construct(e,n||[],w(t).constructor):e.apply(t,n))}(this,e,[{popupSelector:t}]))._imageElement=n._popupElement.querySelector(".modal__preview-image"),n._captionElement=n._popupElement.querySelector(".modal__preview-caption"),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&j(t,e)}(e,t),n=e,r=[{key:"open",value:function(t){var n,r,o,i=t.name,a=t.link;this._imageElement.src=a,this._imageElement.alt=i,this._captionElement.textContent=i,(n=e,r=this,"function"==typeof(o=E(w(1&3?n.prototype:n),"open",r))?function(t){return o.apply(r,t)}:o)([])}}],r&&g(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(h);function P(t){return P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},P(t)}function C(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,L(r.key),r)}}function L(t){var e=function(t){if("object"!=P(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=P(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==P(e)?e:e+""}function I(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(I=function(){return!!t})()}function B(){return B="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!{}.hasOwnProperty.call(t,e)&&null!==(t=T(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},B.apply(null,arguments)}function T(t){return T=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},T(t)}function D(t,e){return D=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},D(t,e)}var q=function(t){function e(t,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=function(t,e,n){return e=T(e),function(t,e){if(e&&("object"==P(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,I()?Reflect.construct(e,n||[],T(t).constructor):e.apply(t,n))}(this,e,[{popupSelector:t}]))._handleFormSubmit=n,r._popupForm=r._popupElement.querySelector(".modal__form"),r._inputList=r._popupForm.querySelectorAll(".modal__input"),r._submitButton=r._popupForm.querySelector(".modal__button"),r._defaultSubmitBtnText=r._submitButton.textContent,r.setEventListeners(),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&D(t,e)}(e,t),n=e,r=[{key:"getForm",value:function(){return this._popupForm}},{key:"_getInputValues",value:function(){var t={};return this._inputList.forEach((function(e){t[e.name]=e.value})),t}},{key:"setInputValues",value:function(t){this._inputList.forEach((function(e){e.value=t[e.name]}))}},{key:"setEventListeners",value:function(){var t,n,r,o=this;this._popupForm.addEventListener("submit",(function(t){t.preventDefault(),console.log("Button text before renderLoading:",o._submitButton.textContent),o.renderLoading(!0),console.log("Button text after renderLoading:",o._submitButton.textContent),o._handleFormSubmit(o._getInputValues()).then((function(){o.close()})).catch((function(t){console.error("Error during form submission:",t)})).finally((function(){console.log("Resetting button text in finally block..."),o.renderLoading(!1)}))})),(t=e,n=this,"function"==typeof(r=B(T(1&3?t.prototype:t),"setEventListeners",n))?function(t){return r.apply(n,t)}:r)([])}},{key:"renderLoading",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Saving...";console.log("renderLoading called. isLoading:",t),this._submitButton.textContent=t?e:this._defaultSubmitBtnText}}],r&&C(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(h);function U(t){return U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},U(t)}function A(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,x(r.key),r)}}function x(t){var e=function(t){if("object"!=U(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=U(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==U(e)?e:e+""}function R(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(R=function(){return!!t})()}function F(t,e,n,r){var o=V(N(1&r?t.prototype:t),e,n);return 2&r&&"function"==typeof o?function(t){return o.apply(n,t)}:o}function V(){return V="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!{}.hasOwnProperty.call(t,e)&&null!==(t=N(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},V.apply(null,arguments)}function N(t){return N=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},N(t)}function J(t,e){return J=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},J(t,e)}var G=function(t){function e(t,n,r){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(o=function(t,e,n){return e=N(e),function(t,e){if(e&&("object"==U(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,R()?Reflect.construct(e,n||[],N(t).constructor):e.apply(t,n))}(this,e,[{popupSelector:t}]))._handleConfirmation=n,o._handleFormSubmit=r,o._confirmButton=document.querySelector("#confirmation-modal-button"),o._submitButton=o._popupElement.querySelector(".modal__button"),o._defaultSubmitBtnText=o._submitButton.textContent,o._setEventListeners(),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&J(t,e)}(e,t),n=e,r=[{key:"_getID",value:function(){return console.log("Getting ID in PopupConfirmation Class:",this._id),this._id}},{key:"open",value:function(t,n){F(e,"open",this,3)([]),this.cardId=t,console.log("Opening confirm popup for ID in PopConfirmation.js:"),this.cardElement=n,console.log("Received cardElement in PopConfirmation.js:",n)}},{key:"close",value:function(){F(e,"close",this,3)([])}},{key:"setSubmitAction",value:function(t){this._handleFormSubmit=t}},{key:"_setEventListeners",value:function(){var t=this;F(e,"setEventListeners",this,3)([]),this._confirmButton.addEventListener("click",(function(){t._handleFormSubmit&&t._handleFormSubmit(),t.close()}))}},{key:"renderLoading",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Saving...";console.log("renderLoading called. isLoading:",t),this._submitButton.textContent=t?e:this._defaultSubmitBtnText}}],r&&A(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(h);function H(t){return H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},H(t)}function z(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,M(r.key),r)}}function M(t){var e=function(t){if("object"!=H(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=H(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==H(e)?e:e+""}var Y=function(){return t=function t(e){var n=e.nameSelector,r=e.jobSelector,o=e.avatarSelector;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._nameElement=document.querySelector(n),this._jobElement=document.querySelector(r),this._avatarElement=document.querySelector(o)},(e=[{key:"getUserInfo",value:function(){return{name:this._nameElement.textContent,job:this._jobElement.textContent,avatar:this._avatarElement.src}}},{key:"setUserInfo",value:function(t){var e=t.name,n=t.job,r=t.avatar;this._nameElement.textContent=e,this._jobElement.textContent=n,this.setUserAvatar(r)}},{key:"setUserAvatar",value:function(t){this._avatarElement.src=t}}])&&z(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function $(t){return $="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$(t)}function K(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Q(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?K(Object(n),!0).forEach((function(e){W(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):K(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function W(t,e,n){return(e=Z(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function X(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Z(r.key),r)}}function Z(t){var e=function(t){if("object"!=$(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=$(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==$(e)?e:e+""}var tt=function(){return t=function t(e){var n=e.baseUrl,r=e.token;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._baseUrl=n,this._headers={authorization:r,"Content-Type":"application/json"}},e=[{key:"_handleResponse",value:function(t){return t.ok?t.json():Promise.reject("Error: ".concat(t.status))}},{key:"_request",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.headers=Q(Q({"Content-Type":"application/json"},this._headers),e.headers),fetch(t,e).then(this._handleResponse)}},{key:"getAppInfo",value:function(){return Promise.all([this.getInitialCards(),this.getUserInfo()])}},{key:"getInitialCards",value:function(){return this._request("".concat(this._baseUrl,"/cards"),{method:"GET"})}},{key:"getUserInfo",value:function(){return this._request("".concat(this._baseUrl,"/users/me"),{method:"GET"})}},{key:"setUserInfo",value:function(t){var e=t.name,n=t.about;return console.log(JSON.stringify({name:e,about:n})),this._request("".concat(this._baseUrl,"/users/me"),{method:"PATCH",body:JSON.stringify({name:e,about:n})})}},{key:"addCard",value:function(t){var e=t.name,n=t.link;return console.log("addCard called with:",{name:e,link:n}),this._request("".concat(this._baseUrl,"/cards"),{method:"POST",body:JSON.stringify({name:e,link:n})})}},{key:"removeCard",value:function(t){return this._request("".concat(this._baseUrl,"/cards/").concat(t),{method:"DELETE"})}},{key:"likeCard",value:function(t){return console.log("Card ID from likeCard Api.js card",t),this._request("".concat(this._baseUrl,"/cards/").concat(t,"/likes"),{method:"PUT"})}},{key:"dislikeCard",value:function(t){return this._request("".concat(this._baseUrl,"/cards/").concat(t,"/likes"),{method:"DELETE"})}},{key:"updateAvatar",value:function(t){return console.log(JSON.stringify(t)),this._request("".concat(this._baseUrl,"/users/me/avatar"),{method:"PATCH",body:JSON.stringify({avatar:t})})}}],e&&X(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}(),et=new tt({baseUrl:"https://around-api.en.tripleten-services.com/v1",token:"29a0771b-e289-443d-a8da-6cea882e108e"});console.log("Before API Call");var nt=new Y({nameSelector:".profile__title",jobSelector:".profile__description",avatarSelector:".profile__image"});et.getUserInfo().then((function(t){nt.setUserInfo({name:t.name,job:t.about,avatar:t.avatar})}));var rt,ot={};rt={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__button",inactiveButtonClass:"modal__button_disabled",inputErrorClass:"modal__input_has-error",errorClass:"modal__error_visible"},Array.from(document.querySelectorAll(rt.formSelector)).forEach((function(t){var e=new s(rt,t),n=t.getAttribute("name");ot[n]=e,e.enableValidation()}));var it=new q("#update-avatar-modal",(function(t){var e=t.avatarUrl;return et.updateAvatar(e).then((function(t){console.log("Avatar updated on server:",t.avatar),nt.setUserAvatar(t.avatar),it.close()})).catch((function(t){console.error("Error updating avatar:",t)}))}),(function(t){it.renderLoading(!0);var e=t.avatar;et.updateAvatar(e).then((function(t){console.log("Avatar URL:",t.avatar),nt.setUserAvatar(t.avatar),it.close(),ct.resetValidation()})).catch((function(t){console.error("Error Submitting Form: ".concat(t))})).finally((function(){console.log("Resetting button text"),it.renderLoading(!1)}))})),at=document.querySelector(".profile__edit-icon"),ut=it.getForm().getAttribute("name"),ct=ot[ut];ct?ct.disableButton():console.error('No validator found for form "'.concat(ut,'"')),it.setEventListeners(),at.addEventListener("click",(function(){it.open(),ct&&ct.resetValidation()}));var lt=new q("#profile-edit-modal",(function(t){return lt.renderLoading(!0),et.setUserInfo({name:t.title,about:t.description}).then((function(t){nt.setUserAvatar(t.avatar);var e=lt.getForm().getAttribute("name");ot[e].disableButton(),lt.close()})).catch((function(t){console.error("Error updating profile:",t)})).finally((function(){console.log("Resetting button text"),lt.renderLoading(!1)}))}));lt.setEventListeners(),document.querySelector("#profile-edit-button").addEventListener("click",(function(){var t=nt.getUserInfo(),e=t.name,n=t.job;lt.setInputValues({title:e,description:n}),lt.open();var r=lt.getForm().getAttribute("name");ot[r].resetValidation()}));var st=new q("#profile-add-modal",(function(t){var e={name:t.title,link:t.link};return st.renderLoading(!0,"Creating..."),et.addCard(e).then((function(t){console.log("Adding new card:",t);var e=pt(t);dt.addItem(e),st.close();var n=st.getForm().getAttribute("name");ot[n].disableButton()})).catch((function(t){console.error("Error adding card:",t)})).finally((function(){st.renderLoading(!1)}))}));document.querySelector(".profile__add-button").addEventListener("click",(function(){st.open()}));var ft=new O("#preview-modal");function pt(t){return new o(t,"#card-form",mt,vt,yt,bt,ht).createCard()}ft.setEventListeners();var dt,yt=new G("#delete-confirm-modal");function mt(t,e){ft.open({name:e,link:t})}function vt(t,e){console.log("Deleting card with ID:",t),yt.renderLoading(!0,"Deleting..."),et.removeCard(t).then((function(){console.log("Card successfully deleted from server"),e.remove(),yt.close(),console.log("Popup should close now")})).catch((function(t){return console.error("Failed to delete card:",t)})).finally((function(){yt.renderLoading(!1)}))}function bt(t,e){var n=e.classList.contains("card__like-button_active"),r=n?et.dislikeCard(t):et.likeCard(t);console.log("Attempting to ".concat(n?"remove":"add"," like for card ID: ").concat(t)),r.then((function(t){console.log("Server responded successfully:",t),e.classList.toggle("card__like-button_active")})).catch((function(t){console.error("Error ".concat(n?"removing":"adding"," like:"),t)}))}function ht(t){return et.dislikeCard(t)}yt.setEventListeners(),yt.setSubmitAction((function(){console.log("Yes button clicked - confirming delete"),vt(yt.cardId,yt.cardElement)})),et.getInitialCards().then((function(t){(dt=new y({items:t,renderer:function(t){var e=pt(t);dt.addItem(e)}},".card__list")).renderItems(),console.log("Cards:",t)})).catch((function(t){console.error("Error fetching cards:",t)}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LENBRUEsU0FBUzFDLEdBQWlCaUMsR0FDeEIsT0FBT0ksR0FBSVEsWUFBWVosRUFDekIsQ0FsREFuQyxHQUFhc0gsb0JBMEJidEgsR0FBYW1OLGlCQUFnQixXQUMzQi9MLFFBQVFDLElBQUksMENBQ1p0QixHQUFrQkMsR0FBYW1DLE9BQVFuQyxHQUFhdUksWUFDdEQsSUF3QkFoRyxHQUNHa0ksa0JBQ0FoSSxNQUFLLFNBQUMySyxJQVFMVCxHQUFVLElBQUluSCxFQUFRLENBQUVFLE1BQU8wSCxFQUFjekgsU0FONUIsU0FBQzZHLEdBRWhCLElBQU1qRSxFQUFjbUUsR0FBV0YsR0FDL0JHLEdBQVFDLFFBQVFyRSxFQUNsQixHQUV5RCxnQkFDakQ4RSxjQUNSak0sUUFBUUMsSUFBSSxTQUFVK0wsRUFDeEIsSUFBRSxPQUNLLFNBQUN2SyxHQUNOekIsUUFBUXlCLE1BQU0sd0JBQXlCQSxFQUN6QyxHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cENvbmZpcm1hdGlvbi5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9BcGkuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL3BhZ2VzL2luZGV4LmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy91dGlscy9jb25zdGFudHMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY2xhc3MgQ2FyZCB7XG4gIGNvbnN0cnVjdG9yKFxuICAgIHsgbmFtZSwgbGluaywgX2lkLCBpc0xpa2VkIH0sXG4gICAgY2FyZFNlbGVjdG9yLFxuICAgIGhhbmRsZUltYWdlQ2xpY2ssXG4gICAgaGFuZGxlRGVsZXRlQ2xpY2ssXG4gICAgY29uZmlybVBvcHVwLFxuICAgIGhhbmRsZUxpa2VDYXJkLFxuICAgIGhhbmRsZVVubGlrZUNhcmRcbiAgKSB7XG4gICAgdGhpcy5fbmFtZSA9IG5hbWU7XG4gICAgdGhpcy5fbGluayA9IGxpbms7XG4gICAgdGhpcy5faWQgPSBfaWQ7XG4gICAgdGhpcy5faXNMaWtlZCA9IGlzTGlrZWQ7XG4gICAgdGhpcy5fY2FyZFNlbGVjdG9yID0gY2FyZFNlbGVjdG9yO1xuICAgIHRoaXMuX2NvbmZpcm1Qb3B1cCA9IGNvbmZpcm1Qb3B1cDtcbiAgICB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrID0gaGFuZGxlSW1hZ2VDbGljaztcbiAgICB0aGlzLl9oYW5kbGVEZWxldGVDbGljayA9IGhhbmRsZURlbGV0ZUNsaWNrO1xuICAgIHRoaXMuX2hhbmRsZUxpa2VDYXJkID0gaGFuZGxlTGlrZUNhcmQ7XG4gICAgdGhpcy5faGFuZGxlVW5saWtlQ2FyZCA9IGhhbmRsZVVubGlrZUNhcmQ7XG4gIH1cblxuICBfZ2V0SUQoKSB7XG4gICAgY29uc29sZS5sb2coXCJHZXR0aW5nIElEOlwiLCB0aGlzLl9pZCk7XG4gICAgcmV0dXJuIHRoaXMuX2lkO1xuICB9XG5cbiAgX2dldFRlbXBsYXRlKCkge1xuICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gZG9jdW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NhcmRTZWxlY3RvcilcbiAgICAgIC5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZFwiKVxuICAgICAgLmNsb25lTm9kZSh0cnVlKTtcblxuICAgIHJldHVybiBjYXJkRWxlbWVudDtcbiAgfVxuXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9saWtlQnV0dG9uID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpa2UtYnV0dG9uXCIpO1xuICAgIHRoaXMuX2NhcmRJbWFnZSA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKTtcbiAgICB0aGlzLl90cmFzaEJ1dHRvbiA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19kZWxldGUtYnV0dG9uXCIpO1xuXG4gICAgaWYgKHRoaXMuX2lzTGlrZWQpIHtcbiAgICAgIHRoaXMuX2xpa2VCdXR0b24uY2xhc3NMaXN0LmFkZChcImNhcmRfX2xpa2UtYnV0dG9uX2FjdGl2ZVwiKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5fbGlrZUJ1dHRvbikge1xuICAgICAgdGhpcy5fbGlrZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICB0aGlzLl9oYW5kbGVMaWtlQ2FyZCh0aGlzLl9nZXRJRCgpLCB0aGlzLl9saWtlQnV0dG9uKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGlmICh0aGlzLl90cmFzaEJ1dHRvbikge1xuICAgICAgdGhpcy5fdHJhc2hCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgY29uc3QgY2FyZElkID0gdGhpcy5fZ2V0SUQoKTtcbiAgICAgICAgY29uc29sZS5sb2coXCJUcmFzaCBCdXR0b246IE9wZW5pbmcgY29uZmlybSBwb3B1cCBmb3IgSUQ6XCIsIGNhcmRJZCk7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiVHJhc2ggQnV0dG9uOiBDYXJkIGVsZW1lbnQ6XCIsIHRoaXMuX2VsZW1lbnQpO1xuICAgICAgICB0aGlzLl9jb25maXJtUG9wdXAub3Blbih0aGlzLl9pZCwgdGhpcy5fZWxlbWVudCk7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBfaGFuZGxlTGlrZUNhcmQoKSB7XG4gICAgY29uc29sZS5sb2coYExpa2luZyBjYXJkIHdpdGggSUQ6ICR7dGhpcy5fZ2V0SUR9YCk7XG4gICAgYXBpXG4gICAgICAubGlrZUNhcmQodGhpcy5fZ2V0SUQoKSlcbiAgICAgIC50aGVuKCgpID0+IHRoaXMuX2xpa2VCdXR0b24uY2xhc3NMaXN0LmFkZChcImNhcmRfX2xpa2UtYnV0dG9uX2FjdGl2ZVwiKSk7XG4gICAgYXBpXG4gICAgICAuZ2V0Q2FyZEJ5SWQodGhpcy5faWQpXG4gICAgICAudGhlbigodXBkYXRlZENhcmREYXRhKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiRmV0Y2hlZCB1cGRhdGVkIGNhcmQgZGF0YTpcIiwgdXBkYXRlZENhcmREYXRhKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5lcnJvcihcIkVycm9yIGxpa2luZyBjYXJkOlwiLCBlcnIpKTtcbiAgfVxuXG4gIF9oYW5kbGVVbmxpa2VDYXJkKCkge1xuICAgIGNvbnNvbGUubG9nKGBVbmxpa2luZyBjYXJkIHdpdGggSUQ6ICR7dGhpcy5fZ2V0SUR9YCk7XG4gICAgYXBpXG4gICAgICAuZGlzbGlrZUNhcmQodGhpcy5fZ2V0SUQoKSlcbiAgICAgIC50aGVuKCgpID0+IHRoaXMuX2xpa2VCdXR0b24uY2xhc3NMaXN0LnJlbW92ZShcImNhcmRfX2xpa2UtYnV0dG9uX2FjdGl2ZVwiKSlcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmVycm9yKFwiRXJyb3IgdW5saWtpbmcgY2FyZDpcIiwgZXJyKSk7XG4gIH1cblxuICBfaGFuZGxlRGVsZXRlQnV0dG9uKCkge1xuICAgIGNvbnNvbGUubG9nKFwiRGVsZXRpbmcgQ2FyZCBJRDpcIiwgdGhpcy5fZ2V0SUQoKSk7XG4gICAgdGhpcy5faGFuZGxlRGVsZXRlQ2xpY2sodGhpcy5fZ2V0SUQoKSwgdGhpcy5fZWxlbWVudCk7XG4gIH1cblxuICBjcmVhdGVDYXJkKCkge1xuICAgIHRoaXMuX2VsZW1lbnQgPSB0aGlzLl9nZXRUZW1wbGF0ZSgpO1xuICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX190aXRsZVwiKS50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XG4gICAgY29uc3QgY2FyZEltYWdlID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpO1xuICAgIGNhcmRJbWFnZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgdGhpcy5faGFuZGxlSW1hZ2VDbGljayh0aGlzLl9saW5rLCB0aGlzLl9uYW1lKTtcbiAgICB9KTtcblxuICAgIGNhcmRJbWFnZS5zcmMgPSB0aGlzLl9saW5rO1xuICAgIGNhcmRJbWFnZS5hbHQgPSB0aGlzLl9uYW1lO1xuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG5cbiAgICByZXR1cm4gdGhpcy5fZWxlbWVudDtcbiAgfVxuICAkO1xufVxuZXhwb3J0IGRlZmF1bHQgQ2FyZDtcbiIsImNsYXNzIEZvcm1WYWxpZGF0b3Ige1xuICBjb25zdHJ1Y3RvcihzZXR0aW5ncywgZm9ybUVsZW1lbnQpIHtcbiAgICB0aGlzLl9zZXR0aW5ncyA9IHNldHRpbmdzO1xuICAgIHRoaXMuX2Zvcm1FbGVtZW50ID0gZm9ybUVsZW1lbnQ7XG4gICAgdGhpcy5faW5wdXRMaXN0ID0gQXJyYXkuZnJvbShcbiAgICAgIHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5fc2V0dGluZ3MuaW5wdXRTZWxlY3RvcilcbiAgICApO1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbiA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICB0aGlzLl9zZXR0aW5ncy5zdWJtaXRCdXR0b25TZWxlY3RvclxuICAgICk7XG4gIH1cblxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG4gIH1cbiAgLy9UT0dHTEUgU1RBVEUgQlVUVE9OXG4gIHRvZ2dsZUJ1dHRvblN0YXRlID0gKCkgPT4ge1xuICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQoKSkge1xuICAgICAgdGhpcy5kaXNhYmxlQnV0dG9uKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX3NldHRpbmdzLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLmRpc2FibGVkID0gZmFsc2U7XG4gICAgfVxuICB9O1xuXG4gIC8vIERJU0FCTEUgQlVUVE9OIEZVTkNUSU9OXG4gIGRpc2FibGVCdXR0b24gPSAoKSA9PiB7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5hZGQodGhpcy5fc2V0dGluZ3MuaW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcbiAgfTtcblxuICAvL0VWRU5UIExJU1RFTkVSUyBJTlBVVCBBTkQgQlVUVE9OIFNUQVRFXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcbiAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCk7XG4gICAgICAgIHRoaXMudG9nZ2xlQnV0dG9uU3RhdGUoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgdGhpcy50b2dnbGVCdXR0b25TdGF0ZSgpO1xuICB9XG5cbiAgLy9DSEVDSyBJTlBVVCBWQUxJRElUWVxuICBfY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCkge1xuICAgIGlmICghaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKSB7XG4gICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQsIGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XG4gICAgfVxuICB9XG5cbiAgLy9TSE9XIElOUFVUIEVSUk9SIE1FU1NBR0VcbiAgX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCwgZXJyb3JNZXNzYWdlKSB7XG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIGAjJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYFxuICAgICk7XG4gICAgLy9jb25zb2xlLmxvZyhcIkVycm9yIEVsZW1lbnQ6XCIsIGVycm9yRWxlbWVudCk7XG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fc2V0dGluZ3MuaW5wdXRFcnJvckNsYXNzKTtcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBlcnJvck1lc3NhZ2U7XG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fc2V0dGluZ3MuZXJyb3JDbGFzcyk7XG4gIH1cblxuICAvL0hJREUgRVJST1IgTUVTU0FHRVxuICBfaGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIGAjJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYFxuICAgICk7XG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fc2V0dGluZ3MuaW5wdXRFcnJvckNsYXNzKTtcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9zZXR0aW5ncy5lcnJvckNsYXNzKTtcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBcIlwiO1xuICB9XG5cbiAgLy9DSEVDSyBJTlZBTElEIElOUFVUXG4gIF9oYXNJbnZhbGlkSW5wdXQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2lucHV0TGlzdC5zb21lKChpbnB1dEVsZW1lbnQpID0+ICFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpO1xuICB9XG5cbiAgLy9SRVNFVCBWQUxJREFUSU9OIEZPUk1cbiAgcmVzZXRWYWxpZGF0aW9uKCkge1xuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XG4gICAgfSk7XG4gICAgdGhpcy50b2dnbGVCdXR0b25TdGF0ZSgpO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IEZvcm1WYWxpZGF0b3I7XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcbiAgY29uc3RydWN0b3IoeyBpdGVtcywgcmVuZGVyZXIgfSwgY29udGFpbmVyU2VsZWN0b3IpIHtcbiAgICB0aGlzLl9pdGVtcyA9IGl0ZW1zO1xuICAgIC8vY29uc29sZS5sb2coXCJJdGVtcyBwYXNzZWQgdG8gU2VjdGlvbjpcIiwgdGhpcy5faXRlbXMpO1xuICAgIHRoaXMucmVuZGVyZXIgPSByZW5kZXJlcjtcbiAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lclNlbGVjdG9yKTtcbiAgfVxuXG4gIHJlbmRlckl0ZW1zKCkge1xuICAgIHRoaXMuX2l0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHtcbiAgICAgIHRoaXMucmVuZGVyZXIoaXRlbSk7XG4gICAgfSk7XG4gIH1cblxuICBhZGRJdGVtKGVsZW1lbnQpIHtcbiAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChlbGVtZW50KTtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcih7IHBvcHVwU2VsZWN0b3IgfSkge1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy5faGFuZGxlRXNjQ2xvc2UgPSB0aGlzLl9oYW5kbGVFc2NDbG9zZS5iaW5kKHRoaXMpO1xuICB9XG5cbiAgb3BlbigpIHtcbiAgICBjb25zb2xlLmxvZyhcIk9wZW5pbmcgbW9kYWw6XCIsIHRoaXMuX3BvcHVwRWxlbWVudCk7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJtb2RhbF9vcGVuZWRcIik7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICB9XG5cbiAgY2xvc2UoKSB7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJtb2RhbF9vcGVuZWRcIik7XG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICB9XG5cbiAgX2hhbmRsZUVzY0Nsb3NlKGV2ZW50KSB7XG4gICAgaWYgKGV2ZW50LmtleSA9PT0gXCJFc2NhcGVcIikge1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH1cbiAgfVxuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIChldmVudCkgPT4ge1xuICAgICAgaWYgKFxuICAgICAgICBldmVudC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwibW9kYWxfX292ZXJsYXlcIikgfHxcbiAgICAgICAgZXZlbnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcIm1vZGFsX19jbG9zZVwiKVxuICAgICAgKSB7XG4gICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufVxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XG4gICAgc3VwZXIoeyBwb3B1cFNlbGVjdG9yIH0pO1xuICAgIHRoaXMuX2ltYWdlRWxlbWVudCA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgXCIubW9kYWxfX3ByZXZpZXctaW1hZ2VcIlxuICAgICk7XG5cbiAgICB0aGlzLl9jYXB0aW9uRWxlbWVudCA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgXCIubW9kYWxfX3ByZXZpZXctY2FwdGlvblwiXG4gICAgKTtcbiAgfVxuICBvcGVuKHsgbmFtZSwgbGluayB9KSB7XG4gICAgdGhpcy5faW1hZ2VFbGVtZW50LnNyYyA9IGxpbms7XG4gICAgdGhpcy5faW1hZ2VFbGVtZW50LmFsdCA9IG5hbWU7XG4gICAgdGhpcy5fY2FwdGlvbkVsZW1lbnQudGV4dENvbnRlbnQgPSBuYW1lO1xuICAgIC8vY29uc29sZS5sb2coXCJJbWFnZSBTb3VyY2U6XCIsIGxpbmspO1xuICAgIC8vY29uc29sZS5sb2coXCJDYXB0aW9uOlwiLCBuYW1lKTtcbiAgICBzdXBlci5vcGVuKCk7XG4gIH1cbn1cbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCBoYW5kbGVGb3JtU3VibWl0KSB7XG4gICAgc3VwZXIoeyBwb3B1cFNlbGVjdG9yIH0pO1xuICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQgPSBoYW5kbGVGb3JtU3VibWl0O1xuICAgIHRoaXMuX3BvcHVwRm9ybSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtXCIpO1xuICAgIHRoaXMuX2lucHV0TGlzdCA9IHRoaXMuX3BvcHVwRm9ybS5xdWVyeVNlbGVjdG9yQWxsKFwiLm1vZGFsX19pbnB1dFwiKTtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24gPSB0aGlzLl9wb3B1cEZvcm0ucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fYnV0dG9uXCIpO1xuICAgIC8vY29uc29sZS5sb2coXCJTdWJtaXQgYnV0dG9uOlwiLCB0aGlzLl9zdWJtaXRCdXR0b24pO1xuICAgIHRoaXMuX2RlZmF1bHRTdWJtaXRCdG5UZXh0ID0gdGhpcy5fc3VibWl0QnV0dG9uLnRleHRDb250ZW50O1xuICAgIHRoaXMuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgfVxuXG4gIGdldEZvcm0oKSB7XG4gICAgcmV0dXJuIHRoaXMuX3BvcHVwRm9ybTtcbiAgfVxuXG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcbiAgICBjb25zdCBmb3JtVmFsdWVzID0ge307XG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XG4gICAgICBmb3JtVmFsdWVzW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWU7XG4gICAgfSk7XG4gICAgLy9jb25zb2xlLmxvZyhcIkNhcHR1cmVkIGZvcm0gdmFsdWVzOlwiLCBmb3JtVmFsdWVzKTtcbiAgICByZXR1cm4gZm9ybVZhbHVlcztcbiAgfVxuXG4gIHNldElucHV0VmFsdWVzKGRhdGEpIHtcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXQpID0+IHtcbiAgICAgIGlucHV0LnZhbHVlID0gZGF0YVtpbnB1dC5uYW1lXTtcbiAgICB9KTtcbiAgfVxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9wb3B1cEZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KSA9PiB7XG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgY29uc29sZS5sb2coXG4gICAgICAgIFwiQnV0dG9uIHRleHQgYmVmb3JlIHJlbmRlckxvYWRpbmc6XCIsXG4gICAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudFxuICAgICAgKTtcblxuICAgICAgdGhpcy5yZW5kZXJMb2FkaW5nKHRydWUpO1xuICAgICAgY29uc29sZS5sb2coXG4gICAgICAgIFwiQnV0dG9uIHRleHQgYWZ0ZXIgcmVuZGVyTG9hZGluZzpcIixcbiAgICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLnRleHRDb250ZW50XG4gICAgICApO1xuXG4gICAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KHRoaXMuX2dldElucHV0VmFsdWVzKCkpXG4gICAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgIH0pXG4gICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgZHVyaW5nIGZvcm0gc3VibWlzc2lvbjpcIiwgZXJyb3IpO1xuICAgICAgICB9KVxuICAgICAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICAgICAgY29uc29sZS5sb2coXCJSZXNldHRpbmcgYnV0dG9uIHRleHQgaW4gZmluYWxseSBibG9jay4uLlwiKTtcbiAgICAgICAgICB0aGlzLnJlbmRlckxvYWRpbmcoZmFsc2UpO1xuICAgICAgICB9KTtcbiAgICB9KTtcblxuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gIH1cblxuICByZW5kZXJMb2FkaW5nKGlzTG9hZGluZywgbG9hZGluZ1RleHQgPSBcIlNhdmluZy4uLlwiKSB7XG4gICAgY29uc29sZS5sb2coXCJyZW5kZXJMb2FkaW5nIGNhbGxlZC4gaXNMb2FkaW5nOlwiLCBpc0xvYWRpbmcpO1xuICAgIGlmIChpc0xvYWRpbmcpIHtcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudCA9IGxvYWRpbmdUZXh0O1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24udGV4dENvbnRlbnQgPSB0aGlzLl9kZWZhdWx0U3VibWl0QnRuVGV4dDtcbiAgICB9XG4gIH1cbn1cbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cFwiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cENvbmZpcm1hdGlvbiBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgaGFuZGxlQ29uZmlybWF0aW9uLCBoYW5kbGVGb3JtU3VibWl0KSB7XG4gICAgc3VwZXIoeyBwb3B1cFNlbGVjdG9yIH0pO1xuICAgIHRoaXMuX2hhbmRsZUNvbmZpcm1hdGlvbiA9IGhhbmRsZUNvbmZpcm1hdGlvbjtcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlRm9ybVN1Ym1pdDtcbiAgICB0aGlzLl9jb25maXJtQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNjb25maXJtYXRpb24tbW9kYWwtYnV0dG9uXCIpO1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbiA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19idXR0b25cIik7XG4gICAgLy9jb25zb2xlLmxvZyhcIlN1Ym1pdCBidXR0b246XCIsIHRoaXMuX3N1Ym1pdEJ1dHRvbik7XG4gICAgdGhpcy5fZGVmYXVsdFN1Ym1pdEJ0blRleHQgPSB0aGlzLl9zdWJtaXRCdXR0b24udGV4dENvbnRlbnQ7XG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgfVxuXG4gIF9nZXRJRCgpIHtcbiAgICBjb25zb2xlLmxvZyhcIkdldHRpbmcgSUQgaW4gUG9wdXBDb25maXJtYXRpb24gQ2xhc3M6XCIsIHRoaXMuX2lkKTtcbiAgICByZXR1cm4gdGhpcy5faWQ7XG4gIH1cblxuICBvcGVuKGNhcmRJZCwgY2FyZEVsZW1lbnQpIHtcbiAgICBzdXBlci5vcGVuKCk7XG4gICAgLy8gY29uc29sZS5sb2coXCJDYXJkIElEIGluIENhcmQgY2xhc3M6XCIsIHRoaXMuX2dldElEKCkpO1xuICAgIC8vIGNvbnNvbGUubG9nKFwiQ2FyZCBFbGVtZW50IGluIENhcmQgY2xhc3M6XCIsIHRoaXMuZWxlbWVudCk7XG4gICAgdGhpcy5jYXJkSWQgPSBjYXJkSWQ7XG4gICAgY29uc29sZS5sb2coXCJPcGVuaW5nIGNvbmZpcm0gcG9wdXAgZm9yIElEIGluIFBvcENvbmZpcm1hdGlvbi5qczpcIik7XG4gICAgdGhpcy5jYXJkRWxlbWVudCA9IGNhcmRFbGVtZW50O1xuICAgIGNvbnNvbGUubG9nKFwiUmVjZWl2ZWQgY2FyZEVsZW1lbnQgaW4gUG9wQ29uZmlybWF0aW9uLmpzOlwiLCBjYXJkRWxlbWVudCk7XG4gIH1cblxuICBjbG9zZSgpIHtcbiAgICBzdXBlci5jbG9zZSgpO1xuICB9XG5cbiAgc2V0U3VibWl0QWN0aW9uKGFjdGlvbikge1xuICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQgPSBhY3Rpb247XG4gIH1cblxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICB0aGlzLl9jb25maXJtQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICBpZiAodGhpcy5faGFuZGxlRm9ybVN1Ym1pdCkgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCgpO1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH0pO1xuICB9XG5cbiAgcmVuZGVyTG9hZGluZyhpc0xvYWRpbmcsIGxvYWRpbmdUZXh0ID0gXCJTYXZpbmcuLi5cIikge1xuICAgIGNvbnNvbGUubG9nKFwicmVuZGVyTG9hZGluZyBjYWxsZWQuIGlzTG9hZGluZzpcIiwgaXNMb2FkaW5nKTtcbiAgICBpZiAoaXNMb2FkaW5nKSB7XG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24udGV4dENvbnRlbnQgPSBsb2FkaW5nVGV4dDtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gdGhpcy5fZGVmYXVsdFN1Ym1pdEJ0blRleHQ7XG4gICAgfVxuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XG4gIGNvbnN0cnVjdG9yKHsgbmFtZVNlbGVjdG9yLCBqb2JTZWxlY3RvciwgYXZhdGFyU2VsZWN0b3IgfSkge1xuICAgIHRoaXMuX25hbWVFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihuYW1lU2VsZWN0b3IpO1xuICAgIHRoaXMuX2pvYkVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGpvYlNlbGVjdG9yKTtcbiAgICB0aGlzLl9hdmF0YXJFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihhdmF0YXJTZWxlY3Rvcik7XG4gICAgLy9jb25zb2xlLmxvZyhcIlVwZGF0ZWQgYXZhdGFyIFVSTDpcIiwgdGhpcy5fYXZhdGFyRWxlbWVudC5zcmMpO1xuICAgIC8vY29uc29sZS5sb2codGhpcy5fbmFtZUVsZW1lbnQsIHRoaXMuX2pvYkVsZW1lbnQpO1xuICB9XG5cbiAgZ2V0VXNlckluZm8oKSB7XG4gICAgLy8gY29uc29sZS5sb2coXCJOYW1lOlwiLCB0aGlzLl9uYW1lRWxlbWVudC50ZXh0Q29udGVudCk7XG4gICAgLy8gY29uc29sZS5sb2coXCJKb2I6XCIsIHRoaXMuX2pvYkVsZW1lbnQudGV4dENvbnRlbnQpO1xuICAgIC8vIGNvbnNvbGUubG9nKFwiQXZhdGFyIFNSQzpcIiwgdGhpcy5fYXZhdGFyRWxlbWVudC5zcmMpO1xuICAgIHJldHVybiB7XG4gICAgICBuYW1lOiB0aGlzLl9uYW1lRWxlbWVudC50ZXh0Q29udGVudCxcbiAgICAgIGpvYjogdGhpcy5fam9iRWxlbWVudC50ZXh0Q29udGVudCxcbiAgICAgIGF2YXRhcjogdGhpcy5fYXZhdGFyRWxlbWVudC5zcmMsXG4gICAgfTtcbiAgfVxuXG4gIHNldFVzZXJJbmZvKHsgbmFtZSwgam9iLCBhdmF0YXIgfSkge1xuICAgIC8vY29uc29sZS5sb2codGhpcy5zZXRVc2VySW5mbyk7XG4gICAgLy9jb25zb2xlLmxvZyhcIlJlY2VpdmVkIGRhdGEgaW4gc2V0VXNlckluZm86XCIsIHsgbmFtZSwgam9iLCBhdmF0YXIgfSk7XG4gICAgdGhpcy5fbmFtZUVsZW1lbnQudGV4dENvbnRlbnQgPSBuYW1lO1xuICAgIHRoaXMuX2pvYkVsZW1lbnQudGV4dENvbnRlbnQgPSBqb2I7XG4gICAgdGhpcy5zZXRVc2VyQXZhdGFyKGF2YXRhcik7XG4gIH1cblxuICBzZXRVc2VyQXZhdGFyKGF2YXRhclVybCkge1xuICAgIC8vY29uc29sZS5sb2coXCJTZXR0aW5nIGF2YXRhciB0bzpcIiwgYXZhdGFyVXJsKTtcbiAgICB0aGlzLl9hdmF0YXJFbGVtZW50LnNyYyA9IGF2YXRhclVybDtcbiAgICAvL2NvbnNvbGUubG9nKFwiQ3VycmVudCBhdmF0YXIgc3JjOlwiLCB0aGlzLl9hdmF0YXJFbGVtZW50LnNyYyk7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEFwaSB7XG4gIGNvbnN0cnVjdG9yKHsgYmFzZVVybCwgdG9rZW4gfSkge1xuICAgIHRoaXMuX2Jhc2VVcmwgPSBiYXNlVXJsO1xuICAgIHRoaXMuX2hlYWRlcnMgPSB7XG4gICAgICBhdXRob3JpemF0aW9uOiB0b2tlbixcbiAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgIH07XG4gIH1cblxuICBfaGFuZGxlUmVzcG9uc2UocmVzKSB7XG4gICAgaWYgKHJlcy5vaykge1xuICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgfVxuICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcbiAgfVxuXG4gIF9yZXF1ZXN0KHVybCwgb3B0aW9ucyA9IHt9KSB7XG4gICAgb3B0aW9ucy5oZWFkZXJzID0ge1xuICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICAuLi50aGlzLl9oZWFkZXJzLFxuICAgICAgLi4ub3B0aW9ucy5oZWFkZXJzLFxuICAgIH07XG5cbiAgICByZXR1cm4gZmV0Y2godXJsLCBvcHRpb25zKS50aGVuKHRoaXMuX2hhbmRsZVJlc3BvbnNlKTtcbiAgfVxuXG4gIGdldEFwcEluZm8oKSB7XG4gICAgcmV0dXJuIFByb21pc2UuYWxsKFt0aGlzLmdldEluaXRpYWxDYXJkcygpLCB0aGlzLmdldFVzZXJJbmZvKCldKTtcbiAgfVxuXG4gIGdldEluaXRpYWxDYXJkcygpIHtcbiAgICByZXR1cm4gdGhpcy5fcmVxdWVzdChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkc2AsIHtcbiAgICAgIG1ldGhvZDogXCJHRVRcIixcbiAgICB9KTtcbiAgfVxuXG4gIGdldFVzZXJJbmZvKCkge1xuICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0KGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lYCwge1xuICAgICAgbWV0aG9kOiBcIkdFVFwiLFxuICAgIH0pO1xuICB9XG5cbiAgc2V0VXNlckluZm8oeyBuYW1lLCBhYm91dCB9KSB7XG4gICAgY29uc29sZS5sb2coSlNPTi5zdHJpbmdpZnkoeyBuYW1lOiBuYW1lLCBhYm91dDogYWJvdXQgfSkpO1xuICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0KGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lYCwge1xuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIG5hbWU6IG5hbWUsXG4gICAgICAgIGFib3V0OiBhYm91dCxcbiAgICAgIH0pLFxuICAgIH0pO1xuICB9XG5cbiAgYWRkQ2FyZCh7IG5hbWUsIGxpbmsgfSkge1xuICAgIGNvbnNvbGUubG9nKFwiYWRkQ2FyZCBjYWxsZWQgd2l0aDpcIiwgeyBuYW1lLCBsaW5rIH0pO1xuICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0KGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzYCwge1xuICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgbmFtZTogbmFtZSxcbiAgICAgICAgbGluazogbGluayxcbiAgICAgIH0pLFxuICAgIH0pO1xuICB9XG5cbiAgcmVtb3ZlQ2FyZChjYXJkSWQpIHtcbiAgICByZXR1cm4gdGhpcy5fcmVxdWVzdChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy8ke2NhcmRJZH1gLCB7XG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXG4gICAgfSk7XG4gIH1cblxuICBsaWtlQ2FyZChjYXJkSWQpIHtcbiAgICBjb25zb2xlLmxvZyhcIkNhcmQgSUQgZnJvbSBsaWtlQ2FyZCBBcGkuanMgY2FyZFwiLCBjYXJkSWQpO1xuICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0KGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzLyR7Y2FyZElkfS9saWtlc2AsIHtcbiAgICAgIG1ldGhvZDogXCJQVVRcIixcbiAgICB9KTtcbiAgfVxuXG4gIGRpc2xpa2VDYXJkKGNhcmRJZCkge1xuICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0KGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzLyR7Y2FyZElkfS9saWtlc2AsIHtcbiAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcbiAgICB9KTtcbiAgfVxuXG4gIHVwZGF0ZUF2YXRhcihhdmF0YXJVcmwpIHtcbiAgICBjb25zb2xlLmxvZyhKU09OLnN0cmluZ2lmeShhdmF0YXJVcmwpKTtcbiAgICByZXR1cm4gdGhpcy5fcmVxdWVzdChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZS9hdmF0YXJgLCB7XG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgYXZhdGFyOiBhdmF0YXJVcmwsXG4gICAgICB9KSxcbiAgICB9KTtcbiAgfVxufVxuIiwiLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuLyogICAgICAgICAgICAgICAgICAgICBNb2R1bGVzXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5pbXBvcnQgXCIuLi9wYWdlcy9pbmRleC5jc3NcIjtcbmltcG9ydCBDYXJkIGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmQuanNcIjtcbmltcG9ydCB7IHNldHRpbmdzIH0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xuaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSBcIi4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qc1wiO1xuaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvU2VjdGlvbi5qc1wiO1xuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzXCI7XG5pbXBvcnQgUG9wdXBDb25maXJtYXRpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBDb25maXJtYXRpb24uanNcIjtcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi4vY29tcG9uZW50cy9Vc2VySW5mby5qc1wiO1xuaW1wb3J0IEFwaSBmcm9tIFwiLi4vY29tcG9uZW50cy9BcGkuanNcIjtcblxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuLyogICAgICAgICAgICAgICAgICAgICAgICBBUElcbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cbmNvbnN0IGFwaSA9IG5ldyBBcGkoe1xuICBiYXNlVXJsOiBcImh0dHBzOi8vYXJvdW5kLWFwaS5lbi50cmlwbGV0ZW4tc2VydmljZXMuY29tL3YxXCIsXG4gIHRva2VuOiBcIjI5YTA3NzFiLWUyODktNDQzZC1hOGRhLTZjZWE4ODJlMTA4ZVwiLFxufSk7XG5cbmNvbnNvbGUubG9nKFwiQmVmb3JlIEFQSSBDYWxsXCIpO1xuXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG4vKiAgICAgICAgICAgICAgICAgIENhcmQgVGVtcGxhdGUgXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5jb25zdCBjYXJkRGF0YSA9IHtcbiAgbmFtZTogXCJZb3NlbWl0ZSBWYWxsZXlcIixcbiAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L3lvc2VtaXRlLmpwZ1wiLFxufTtcblxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuLyogICAgICAgICAgICAgICAgICAgICBVc2VyIEluZm8gXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5jb25zdCB1c2VySW5mbyA9IG5ldyBVc2VySW5mbyh7XG4gIG5hbWVTZWxlY3RvcjogXCIucHJvZmlsZV9fdGl0bGVcIixcbiAgam9iU2VsZWN0b3I6IFwiLnByb2ZpbGVfX2Rlc2NyaXB0aW9uXCIsXG4gIGF2YXRhclNlbGVjdG9yOiBcIi5wcm9maWxlX19pbWFnZVwiLFxufSk7XG5cbmFwaS5nZXRVc2VySW5mbygpLnRoZW4oKHVzZXJEYXRhKSA9PiB7XG4gIC8vY29uc29sZS5sb2coXCJTZXR0aW5nIGF2YXRhciB0bzpcIiwgdXNlckRhdGEuYXZhdGFyKTtcbiAgLy9jb25zb2xlLmxvZyhcIlVzZXIgRGF0YSBmcm9tIEFQSTpcIiwgdXNlckRhdGEpO1xuICB1c2VySW5mby5zZXRVc2VySW5mbyh7XG4gICAgbmFtZTogdXNlckRhdGEubmFtZSxcbiAgICBqb2I6IHVzZXJEYXRhLmFib3V0LFxuICAgIGF2YXRhcjogdXNlckRhdGEuYXZhdGFyLFxuICB9KTtcbn0pO1xuXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG4vKiAgICAgICAgICAgICAgICAgICAgIEZvcm0gVmFsaWRhdGlvblxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuY29uc3QgZm9ybVZhbGlkYXRvcnMgPSB7fTtcblxuY29uc3QgZW5hYmxlVmFsaWRhdGlvbiA9IChzZXR0aW5ncykgPT4ge1xuICBjb25zdCBmb3JtTGlzdCA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChzZXR0aW5ncy5mb3JtU2VsZWN0b3IpKTtcbiAgZm9ybUxpc3QuZm9yRWFjaCgoZm9ybUVsZW1lbnQpID0+IHtcbiAgICBjb25zdCB2YWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihzZXR0aW5ncywgZm9ybUVsZW1lbnQpO1xuICAgIGNvbnN0IGZvcm1OYW1lID0gZm9ybUVsZW1lbnQuZ2V0QXR0cmlidXRlKFwibmFtZVwiKTtcblxuICAgIGZvcm1WYWxpZGF0b3JzW2Zvcm1OYW1lXSA9IHZhbGlkYXRvcjtcbiAgICB2YWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuICB9KTtcbn07XG5cbmVuYWJsZVZhbGlkYXRpb24oc2V0dGluZ3MpO1xuXG4vLyAvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG4vLyAvKiAgICAgICAgICAgICAgICAgUHJvZmlsZSBBdmF0YXJcbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cbmNvbnN0IGhhbmRsZUF2YXRhckZvcm1TdWJtaXQgPSAoZm9ybURhdGEpID0+IHtcbiAgY29uc3QgbmV3QXZhdGFyVXJsID0gZm9ybURhdGEuYXZhdGFyVXJsO1xuXG4gIHJldHVybiBhcGlcbiAgICAudXBkYXRlQXZhdGFyKG5ld0F2YXRhclVybClcbiAgICAudGhlbigodXNlckRhdGEpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKFwiQXZhdGFyIHVwZGF0ZWQgb24gc2VydmVyOlwiLCB1c2VyRGF0YS5hdmF0YXIpO1xuICAgICAgdXNlckluZm8uc2V0VXNlckF2YXRhcih1c2VyRGF0YS5hdmF0YXIpO1xuICAgICAgcHJvZmlsZUVkaXRBdmF0YXIuY2xvc2UoKTtcbiAgICB9KVxuICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciB1cGRhdGluZyBhdmF0YXI6XCIsIGVycm9yKTtcbiAgICB9KTtcbn07XG5cbmNvbnN0IHByb2ZpbGVFZGl0QXZhdGFyID0gbmV3IFBvcHVwV2l0aEZvcm0oXG4gIFwiI3VwZGF0ZS1hdmF0YXItbW9kYWxcIixcbiAgaGFuZGxlQXZhdGFyRm9ybVN1Ym1pdCxcbiAgKGZvcm1WYWx1ZXMpID0+IHtcbiAgICBwcm9maWxlRWRpdEF2YXRhci5yZW5kZXJMb2FkaW5nKHRydWUpO1xuICAgIGNvbnN0IGF2YXRhclVybCA9IGZvcm1WYWx1ZXMuYXZhdGFyO1xuICAgIGFwaVxuICAgICAgLnVwZGF0ZUF2YXRhcihhdmF0YXJVcmwpXG4gICAgICAudGhlbigodXNlckRhdGEpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coXCJBdmF0YXIgVVJMOlwiLCB1c2VyRGF0YS5hdmF0YXIpO1xuICAgICAgICB1c2VySW5mby5zZXRVc2VyQXZhdGFyKHVzZXJEYXRhLmF2YXRhcik7XG4gICAgICAgIHByb2ZpbGVFZGl0QXZhdGFyLmNsb3NlKCk7XG4gICAgICAgIHZhbGlkYXRvci5yZXNldFZhbGlkYXRpb24oKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICBjb25zb2xlLmVycm9yKGBFcnJvciBTdWJtaXR0aW5nIEZvcm06ICR7ZXJyfWApO1xuICAgICAgfSlcbiAgICAgIC5maW5hbGx5KCgpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coXCJSZXNldHRpbmcgYnV0dG9uIHRleHRcIik7XG4gICAgICAgIHByb2ZpbGVFZGl0QXZhdGFyLnJlbmRlckxvYWRpbmcoZmFsc2UpO1xuICAgICAgfSk7XG4gIH1cbik7XG5cbmNvbnN0IHByb2ZpbGVFZGl0QXZhdGFyQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19lZGl0LWljb25cIik7XG5cbmNvbnN0IGZvcm1OYW1lID0gcHJvZmlsZUVkaXRBdmF0YXIuZ2V0Rm9ybSgpLmdldEF0dHJpYnV0ZShcIm5hbWVcIik7XG4vL2NvbnNvbGUubG9nKFwiRm9ybSBFbGVtZW50OlwiLCBmb3JtTmFtZSk7XG5cbmNvbnN0IHZhbGlkYXRvciA9IGZvcm1WYWxpZGF0b3JzW2Zvcm1OYW1lXTtcbmlmICh2YWxpZGF0b3IpIHtcbiAgdmFsaWRhdG9yLmRpc2FibGVCdXR0b24oKTtcbn0gZWxzZSB7XG4gIGNvbnNvbGUuZXJyb3IoYE5vIHZhbGlkYXRvciBmb3VuZCBmb3IgZm9ybSBcIiR7Zm9ybU5hbWV9XCJgKTtcbn1cblxucHJvZmlsZUVkaXRBdmF0YXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxucHJvZmlsZUVkaXRBdmF0YXJCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgcHJvZmlsZUVkaXRBdmF0YXIub3BlbigpO1xuXG4gIGlmICh2YWxpZGF0b3IpIHtcbiAgICB2YWxpZGF0b3IucmVzZXRWYWxpZGF0aW9uKCk7XG4gIH1cbn0pO1xuXG4vLyAvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG4vLyAvKiAgICAgICAgICAgICAgICAgUHJvZmlsZSBFZGl0XG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5jb25zdCBwcm9maWxlRWRpdFBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oXG4gIFwiI3Byb2ZpbGUtZWRpdC1tb2RhbFwiLFxuICAoZm9ybVZhbHVlcykgPT4ge1xuICAgIHByb2ZpbGVFZGl0UG9wdXAucmVuZGVyTG9hZGluZyh0cnVlKTtcbiAgICByZXR1cm4gYXBpXG4gICAgICAuc2V0VXNlckluZm8oe1xuICAgICAgICBuYW1lOiBmb3JtVmFsdWVzLnRpdGxlLFxuICAgICAgICBhYm91dDogZm9ybVZhbHVlcy5kZXNjcmlwdGlvbixcbiAgICAgIH0pXG4gICAgICAudGhlbigoZGF0YSkgPT4ge1xuICAgICAgICB1c2VySW5mby5zZXRVc2VyQXZhdGFyKGRhdGEuYXZhdGFyKTtcblxuICAgICAgICBjb25zdCBmb3JtTmFtZSA9IHByb2ZpbGVFZGl0UG9wdXAuZ2V0Rm9ybSgpLmdldEF0dHJpYnV0ZShcIm5hbWVcIik7XG4gICAgICAgIGNvbnN0IHZhbGlkYXRvciA9IGZvcm1WYWxpZGF0b3JzW2Zvcm1OYW1lXTtcbiAgICAgICAgdmFsaWRhdG9yLmRpc2FibGVCdXR0b24oKTtcbiAgICAgICAgcHJvZmlsZUVkaXRQb3B1cC5jbG9zZSgpO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIHVwZGF0aW5nIHByb2ZpbGU6XCIsIGVycm9yKTtcbiAgICAgIH0pXG4gICAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiUmVzZXR0aW5nIGJ1dHRvbiB0ZXh0XCIpO1xuICAgICAgICBwcm9maWxlRWRpdFBvcHVwLnJlbmRlckxvYWRpbmcoZmFsc2UpO1xuICAgICAgfSk7XG4gIH1cbik7XG5cbnByb2ZpbGVFZGl0UG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1lZGl0LWJ1dHRvblwiKS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBjb25zdCB7IG5hbWUsIGpvYiB9ID0gdXNlckluZm8uZ2V0VXNlckluZm8oKTtcbiAgLy9jb25zb2xlLmxvZyhcIkN1cnJlbnQgdXNlciBpbmZvOlwiLCB7IG5hbWUsIGpvYiB9KTtcblxuICBwcm9maWxlRWRpdFBvcHVwLnNldElucHV0VmFsdWVzKHtcbiAgICB0aXRsZTogbmFtZSxcbiAgICBkZXNjcmlwdGlvbjogam9iLFxuICB9KTtcblxuICBwcm9maWxlRWRpdFBvcHVwLm9wZW4oKTtcbiAgY29uc3QgZm9ybU5hbWUgPSBwcm9maWxlRWRpdFBvcHVwLmdldEZvcm0oKS5nZXRBdHRyaWJ1dGUoXCJuYW1lXCIpO1xuICBjb25zdCB2YWxpZGF0b3IgPSBmb3JtVmFsaWRhdG9yc1tmb3JtTmFtZV07XG4gIHZhbGlkYXRvci5yZXNldFZhbGlkYXRpb24oKTtcbn0pO1xuXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG4vKiAgICAgICAgICAgICAgICAgQWRkaW5nIENhcmRzICBcbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cbmNvbnN0IGFkZENhcmRGb3JtUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShcbiAgXCIjcHJvZmlsZS1hZGQtbW9kYWxcIixcbiAgKGZvcm1WYWx1ZXMpID0+IHtcbiAgICBjb25zdCBjYXJkRGF0YSA9IHtcbiAgICAgIG5hbWU6IGZvcm1WYWx1ZXMudGl0bGUsXG4gICAgICBsaW5rOiBmb3JtVmFsdWVzLmxpbmssXG4gICAgfTtcblxuICAgIGFkZENhcmRGb3JtUG9wdXAucmVuZGVyTG9hZGluZyh0cnVlLCBcIkNyZWF0aW5nLi4uXCIpO1xuXG4gICAgcmV0dXJuIGFwaVxuICAgICAgLmFkZENhcmQoY2FyZERhdGEpXG4gICAgICAudGhlbigoY2FyZERhdGEpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coXCJBZGRpbmcgbmV3IGNhcmQ6XCIsIGNhcmREYXRhKTtcbiAgICAgICAgY29uc3QgY2FyZEVsZW1lbnQgPSBjcmVhdGVDYXJkKGNhcmREYXRhKTtcbiAgICAgICAgc2VjdGlvbi5hZGRJdGVtKGNhcmRFbGVtZW50KTtcbiAgICAgICAgYWRkQ2FyZEZvcm1Qb3B1cC5jbG9zZSgpO1xuXG4gICAgICAgIGNvbnN0IGZvcm1OYW1lID0gYWRkQ2FyZEZvcm1Qb3B1cC5nZXRGb3JtKCkuZ2V0QXR0cmlidXRlKFwibmFtZVwiKTtcbiAgICAgICAgY29uc3QgdmFsaWRhdG9yID0gZm9ybVZhbGlkYXRvcnNbZm9ybU5hbWVdO1xuICAgICAgICB2YWxpZGF0b3IuZGlzYWJsZUJ1dHRvbigpO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGFkZGluZyBjYXJkOlwiLCBlcnJvcik7XG4gICAgICB9KVxuICAgICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgICBhZGRDYXJkRm9ybVBvcHVwLnJlbmRlckxvYWRpbmcoZmFsc2UpO1xuICAgICAgfSk7XG4gIH1cbik7XG5cbmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYWRkLWJ1dHRvblwiKS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBhZGRDYXJkRm9ybVBvcHVwLm9wZW4oKTtcbn0pO1xuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuLyogICAgICAgICAgICAgICAgIFByZXZpZXcgSW1hZ2UgUG9wdXAgXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5jb25zdCBpbWFnZVBvcHVwID0gbmV3IFBvcHVwV2l0aEltYWdlKFwiI3ByZXZpZXctbW9kYWxcIik7XG5pbWFnZVBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cbi8qICAgICAgICAgICAgICAgICBSZW5kZXJpbmcgQ2FyZHMgXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5mdW5jdGlvbiBjcmVhdGVDYXJkKGl0ZW0pIHtcbiAgLy9jb25zb2xlLmxvZyhcIkl0ZW0gZGF0YTpcIiwgaXRlbSk7XG4gIGNvbnN0IGNhcmRFbGVtZW50ID0gbmV3IENhcmQoXG4gICAgaXRlbSxcbiAgICBcIiNjYXJkLWZvcm1cIixcbiAgICBoYW5kbGVJbWFnZUNsaWNrLFxuICAgIGhhbmRsZURlbGV0ZUNsaWNrLFxuICAgIGNvbmZpcm1Qb3B1cCxcbiAgICBoYW5kbGVMaWtlQ2FyZCxcbiAgICBoYW5kbGVVbmxpa2VDYXJkXG4gICk7XG5cbiAgcmV0dXJuIGNhcmRFbGVtZW50LmNyZWF0ZUNhcmQoKTtcbn1cblxuY29uc3QgY29uZmlybVBvcHVwID0gbmV3IFBvcHVwQ29uZmlybWF0aW9uKFwiI2RlbGV0ZS1jb25maXJtLW1vZGFsXCIpO1xuY29uZmlybVBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbmZ1bmN0aW9uIGhhbmRsZUltYWdlQ2xpY2sobGluaywgbmFtZSkge1xuICAvL2NvbnNvbGUubG9nKFwiUHJldmlldyBtb2RhbCB0cmlnZ2VyZWQgZm9yOlwiLCBsaW5rLCBuYW1lKTtcbiAgaW1hZ2VQb3B1cC5vcGVuKHsgbmFtZSwgbGluayB9KTtcbn1cblxuZnVuY3Rpb24gaGFuZGxlRGVsZXRlQ2xpY2soY2FyZElkLCBjYXJkRWxlbWVudCkge1xuICBjb25zb2xlLmxvZyhcIkRlbGV0aW5nIGNhcmQgd2l0aCBJRDpcIiwgY2FyZElkKTtcblxuICBjb25maXJtUG9wdXAucmVuZGVyTG9hZGluZyh0cnVlLCBcIkRlbGV0aW5nLi4uXCIpO1xuXG4gIGFwaVxuICAgIC5yZW1vdmVDYXJkKGNhcmRJZClcbiAgICAudGhlbigoKSA9PiB7XG4gICAgICBjb25zb2xlLmxvZyhcIkNhcmQgc3VjY2Vzc2Z1bGx5IGRlbGV0ZWQgZnJvbSBzZXJ2ZXJcIik7XG4gICAgICBjYXJkRWxlbWVudC5yZW1vdmUoKTtcbiAgICAgIGNvbmZpcm1Qb3B1cC5jbG9zZSgpO1xuICAgICAgY29uc29sZS5sb2coXCJQb3B1cCBzaG91bGQgY2xvc2Ugbm93XCIpO1xuICAgIH0pXG4gICAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUuZXJyb3IoXCJGYWlsZWQgdG8gZGVsZXRlIGNhcmQ6XCIsIGVycikpXG4gICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgY29uZmlybVBvcHVwLnJlbmRlckxvYWRpbmcoZmFsc2UpO1xuICAgIH0pO1xufVxuXG5jb25maXJtUG9wdXAuc2V0U3VibWl0QWN0aW9uKCgpID0+IHtcbiAgY29uc29sZS5sb2coXCJZZXMgYnV0dG9uIGNsaWNrZWQgLSBjb25maXJtaW5nIGRlbGV0ZVwiKTtcbiAgaGFuZGxlRGVsZXRlQ2xpY2soY29uZmlybVBvcHVwLmNhcmRJZCwgY29uZmlybVBvcHVwLmNhcmRFbGVtZW50KTtcbn0pO1xuXG5mdW5jdGlvbiBoYW5kbGVMaWtlQ2FyZChjYXJkSWQsIGxpa2VCdXR0b24pIHtcbiAgY29uc3QgaXNMaWtlZCA9IGxpa2VCdXR0b24uY2xhc3NMaXN0LmNvbnRhaW5zKFwiY2FyZF9fbGlrZS1idXR0b25fYWN0aXZlXCIpO1xuICBjb25zdCBhcGlDYWxsID0gaXNMaWtlZCA/IGFwaS5kaXNsaWtlQ2FyZChjYXJkSWQpIDogYXBpLmxpa2VDYXJkKGNhcmRJZCk7XG4gIGNvbnNvbGUubG9nKFxuICAgIGBBdHRlbXB0aW5nIHRvICR7aXNMaWtlZCA/IFwicmVtb3ZlXCIgOiBcImFkZFwifSBsaWtlIGZvciBjYXJkIElEOiAke2NhcmRJZH1gXG4gICk7XG5cbiAgYXBpQ2FsbFxuICAgIC50aGVuKCh1cGRhdGVkRGF0YSkgPT4ge1xuICAgICAgY29uc29sZS5sb2coXCJTZXJ2ZXIgcmVzcG9uZGVkIHN1Y2Nlc3NmdWxseTpcIiwgdXBkYXRlZERhdGEpO1xuICAgICAgbGlrZUJ1dHRvbi5jbGFzc0xpc3QudG9nZ2xlKFwiY2FyZF9fbGlrZS1idXR0b25fYWN0aXZlXCIpO1xuICAgIH0pXG4gICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yICR7aXNMaWtlZCA/IFwicmVtb3ZpbmdcIiA6IFwiYWRkaW5nXCJ9IGxpa2U6YCwgZXJyKTtcbiAgICB9KTtcbn1cblxuZnVuY3Rpb24gaGFuZGxlVW5saWtlQ2FyZChjYXJkSWQpIHtcbiAgcmV0dXJuIGFwaS5kaXNsaWtlQ2FyZChjYXJkSWQpO1xufVxuXG5sZXQgc2VjdGlvbjtcbmFwaVxuICAuZ2V0SW5pdGlhbENhcmRzKClcbiAgLnRoZW4oKGluaXRpYWxDYXJkcykgPT4ge1xuICAgIC8vY29uc29sZS5sb2coXCJDYXJkcyB3aXRoIGxpa2UgZGF0YTpcIiwgaW5pdGlhbENhcmRzKTtcbiAgICBjb25zdCByZW5kZXJlciA9IChjYXJkRGF0YSkgPT4ge1xuICAgICAgLy9jb25zb2xlLmxvZyhcIlJlbmRlcmluZyBjYXJkOlwiLCBjYXJkRGF0YSk7XG4gICAgICBjb25zdCBjYXJkRWxlbWVudCA9IGNyZWF0ZUNhcmQoY2FyZERhdGEpO1xuICAgICAgc2VjdGlvbi5hZGRJdGVtKGNhcmRFbGVtZW50KTtcbiAgICB9O1xuXG4gICAgc2VjdGlvbiA9IG5ldyBTZWN0aW9uKHsgaXRlbXM6IGluaXRpYWxDYXJkcywgcmVuZGVyZXIgfSwgXCIuY2FyZF9fbGlzdFwiKTtcbiAgICBzZWN0aW9uLnJlbmRlckl0ZW1zKCk7XG4gICAgY29uc29sZS5sb2coXCJDYXJkczpcIiwgaW5pdGlhbENhcmRzKTtcbiAgfSlcbiAgLmNhdGNoKChlcnJvcikgPT4ge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBmZXRjaGluZyBjYXJkczpcIiwgZXJyb3IpO1xuICB9KTtcbiIsIi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cbi8qICAgICAgICAgICAgICAgICAgICAgRm9ybSBWYWxpZGF0aW9uIFxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuZXhwb3J0IGNvbnN0IHNldHRpbmdzID0ge1xuICBmb3JtU2VsZWN0b3I6IFwiLm1vZGFsX19mb3JtXCIsXG4gIGlucHV0U2VsZWN0b3I6IFwiLm1vZGFsX19pbnB1dFwiLFxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIubW9kYWxfX2J1dHRvblwiLFxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcIm1vZGFsX19idXR0b25fZGlzYWJsZWRcIixcbiAgaW5wdXRFcnJvckNsYXNzOiBcIm1vZGFsX19pbnB1dF9oYXMtZXJyb3JcIixcbiAgZXJyb3JDbGFzczogXCJtb2RhbF9fZXJyb3JfdmlzaWJsZVwiLFxufTtcbiJdLCJuYW1lcyI6WyJDYXJkIiwiX3JlZiIsImNhcmRTZWxlY3RvciIsImhhbmRsZUltYWdlQ2xpY2siLCJoYW5kbGVEZWxldGVDbGljayIsImNvbmZpcm1Qb3B1cCIsImhhbmRsZUxpa2VDYXJkIiwiaGFuZGxlVW5saWtlQ2FyZCIsIm5hbWUiLCJsaW5rIiwiX2lkIiwiaXNMaWtlZCIsIl9jbGFzc0NhbGxDaGVjayIsInRoaXMiLCJfbmFtZSIsIl9saW5rIiwiX2lzTGlrZWQiLCJfY2FyZFNlbGVjdG9yIiwiX2NvbmZpcm1Qb3B1cCIsIl9oYW5kbGVJbWFnZUNsaWNrIiwiX2hhbmRsZURlbGV0ZUNsaWNrIiwiX2hhbmRsZUxpa2VDYXJkIiwiX2hhbmRsZVVubGlrZUNhcmQiLCJrZXkiLCJ2YWx1ZSIsImNvbnNvbGUiLCJsb2ciLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiX3RoaXMiLCJfbGlrZUJ1dHRvbiIsIl9lbGVtZW50IiwiX2NhcmRJbWFnZSIsIl90cmFzaEJ1dHRvbiIsImNsYXNzTGlzdCIsImFkZCIsImFkZEV2ZW50TGlzdGVuZXIiLCJfZ2V0SUQiLCJjYXJkSWQiLCJvcGVuIiwiX3RoaXMyIiwiY29uY2F0IiwiYXBpIiwibGlrZUNhcmQiLCJ0aGVuIiwiZ2V0Q2FyZEJ5SWQiLCJ1cGRhdGVkQ2FyZERhdGEiLCJlcnIiLCJlcnJvciIsIl90aGlzMyIsImRpc2xpa2VDYXJkIiwicmVtb3ZlIiwiX3RoaXM0IiwiX2dldFRlbXBsYXRlIiwidGV4dENvbnRlbnQiLCJjYXJkSW1hZ2UiLCJzcmMiLCJhbHQiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJGb3JtVmFsaWRhdG9yIiwic2V0dGluZ3MiLCJmb3JtRWxlbWVudCIsIl9kZWZpbmVQcm9wZXJ0eSIsIl9oYXNJbnZhbGlkSW5wdXQiLCJkaXNhYmxlQnV0dG9uIiwiX3N1Ym1pdEJ1dHRvbiIsIl9zZXR0aW5ncyIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJkaXNhYmxlZCIsIl9mb3JtRWxlbWVudCIsIl9pbnB1dExpc3QiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiaW5wdXRTZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiZm9yRWFjaCIsImlucHV0RWxlbWVudCIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJ0b2dnbGVCdXR0b25TdGF0ZSIsInZhbGlkaXR5IiwidmFsaWQiLCJfaGlkZUlucHV0RXJyb3IiLCJfc2hvd0lucHV0RXJyb3IiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsImVycm9yTWVzc2FnZSIsImVycm9yRWxlbWVudCIsImlkIiwiaW5wdXRFcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsInNvbWUiLCJTZWN0aW9uIiwiY29udGFpbmVyU2VsZWN0b3IiLCJpdGVtcyIsInJlbmRlcmVyIiwiX2l0ZW1zIiwiX2NvbnRhaW5lciIsIml0ZW0iLCJlbGVtZW50IiwicHJlcGVuZCIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsIl9wb3B1cEVsZW1lbnQiLCJfaGFuZGxlRXNjQ2xvc2UiLCJiaW5kIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImV2ZW50IiwiY2xvc2UiLCJ0YXJnZXQiLCJjb250YWlucyIsIlBvcHVwV2l0aEltYWdlIiwiX1BvcHVwIiwiX2NhbGxTdXBlciIsIl9pbWFnZUVsZW1lbnQiLCJfY2FwdGlvbkVsZW1lbnQiLCJfaW5oZXJpdHMiLCJQb3B1cFdpdGhGb3JtIiwiaGFuZGxlRm9ybVN1Ym1pdCIsIl9oYW5kbGVGb3JtU3VibWl0IiwiX3BvcHVwRm9ybSIsIl9kZWZhdWx0U3VibWl0QnRuVGV4dCIsInNldEV2ZW50TGlzdGVuZXJzIiwiZm9ybVZhbHVlcyIsImlucHV0IiwiZGF0YSIsImV2dCIsInByZXZlbnREZWZhdWx0IiwicmVuZGVyTG9hZGluZyIsIl9nZXRJbnB1dFZhbHVlcyIsImlzTG9hZGluZyIsImxvYWRpbmdUZXh0IiwiYXJndW1lbnRzIiwibGVuZ3RoIiwidW5kZWZpbmVkIiwiUG9wdXBDb25maXJtYXRpb24iLCJoYW5kbGVDb25maXJtYXRpb24iLCJfaGFuZGxlQ29uZmlybWF0aW9uIiwiX2NvbmZpcm1CdXR0b24iLCJjYXJkRWxlbWVudCIsIl9zdXBlclByb3BHZXQiLCJhY3Rpb24iLCJVc2VySW5mbyIsIm5hbWVTZWxlY3RvciIsImpvYlNlbGVjdG9yIiwiYXZhdGFyU2VsZWN0b3IiLCJfbmFtZUVsZW1lbnQiLCJfam9iRWxlbWVudCIsIl9hdmF0YXJFbGVtZW50Iiwiam9iIiwiYXZhdGFyIiwiX3JlZjIiLCJzZXRVc2VyQXZhdGFyIiwiYXZhdGFyVXJsIiwiQXBpIiwiYmFzZVVybCIsInRva2VuIiwiX2Jhc2VVcmwiLCJfaGVhZGVycyIsImF1dGhvcml6YXRpb24iLCJyZXMiLCJvayIsImpzb24iLCJQcm9taXNlIiwicmVqZWN0Iiwic3RhdHVzIiwidXJsIiwib3B0aW9ucyIsImhlYWRlcnMiLCJfb2JqZWN0U3ByZWFkIiwiZmV0Y2giLCJfaGFuZGxlUmVzcG9uc2UiLCJhbGwiLCJnZXRJbml0aWFsQ2FyZHMiLCJnZXRVc2VySW5mbyIsIl9yZXF1ZXN0IiwibWV0aG9kIiwiYWJvdXQiLCJKU09OIiwic3RyaW5naWZ5IiwiYm9keSIsIl9yZWYzIiwidXNlckluZm8iLCJ1c2VyRGF0YSIsInNldFVzZXJJbmZvIiwiZm9ybVZhbGlkYXRvcnMiLCJmb3JtU2VsZWN0b3IiLCJ2YWxpZGF0b3IiLCJmb3JtTmFtZSIsImdldEF0dHJpYnV0ZSIsImVuYWJsZVZhbGlkYXRpb24iLCJwcm9maWxlRWRpdEF2YXRhciIsImZvcm1EYXRhIiwibmV3QXZhdGFyVXJsIiwidXBkYXRlQXZhdGFyIiwicmVzZXRWYWxpZGF0aW9uIiwicHJvZmlsZUVkaXRBdmF0YXJCdXR0b24iLCJnZXRGb3JtIiwicHJvZmlsZUVkaXRQb3B1cCIsInRpdGxlIiwiZGVzY3JpcHRpb24iLCJfdXNlckluZm8kZ2V0VXNlckluZm8iLCJzZXRJbnB1dFZhbHVlcyIsImFkZENhcmRGb3JtUG9wdXAiLCJjYXJkRGF0YSIsImFkZENhcmQiLCJjcmVhdGVDYXJkIiwic2VjdGlvbiIsImFkZEl0ZW0iLCJpbWFnZVBvcHVwIiwicmVtb3ZlQ2FyZCIsImxpa2VCdXR0b24iLCJhcGlDYWxsIiwidXBkYXRlZERhdGEiLCJ0b2dnbGUiLCJzZXRTdWJtaXRBY3Rpb24iLCJpbml0aWFsQ2FyZHMiLCJyZW5kZXJJdGVtcyJdLCJzb3VyY2VSb290IjoiIn0=