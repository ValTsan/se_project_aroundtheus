!function(){"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,n(o.key),o)}}function n(e){var n=function(e){if("object"!=t(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=t(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==t(n)?n:n+""}var r=function(){return t=function t(e,r,o){var i,u,a,l=e.name,c=e.link;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),i=this,a=void 0,(u=n(u="$"))in i?Object.defineProperty(i,u,{value:a,enumerable:!0,configurable:!0,writable:!0}):i[u]=a,this._name=l,this._link=c,this._cardSelector=r,this._handleImageClick=o},(r=[{key:"_getTemplate",value:function(){return document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0)}},{key:"_setEventListeners",value:function(){var t=this;this._likeButton=this._element.querySelector(".card__like-button"),this._cardImage=this._element.querySelector(".card__image"),this._trashButton=this._element.querySelector(".card__delete-button"),this._likeButton&&this._likeButton.addEventListener("click",(function(){t._handleLikeButton()})),this._cardImage&&this._cardImage.addEventListener("click",(function(){t._handleImageClick(t._link,t._name)})),this._trashButton&&this._trashButton.addEventListener("click",(function(){t._handleDeleteButton()}))}},{key:"_handleLikeButton",value:function(){this._likeButton.classList.toggle("card__like-button_active")}},{key:"_handleDeleteButton",value:function(){this._element.remove(),this._element=null}},{key:"createCard",value:function(){this._element=this._getTemplate(),this._element.querySelector(".card__title").textContent=this._name;var t=this._element.querySelector(".card__image");return t.src=this._link,t.alt=this._name,this._setEventListeners(),this._element}}])&&e(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r}(),o=r;function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,l(r.key),r)}}function a(t,e,n){return(e=l(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function l(t){var e=function(t){if("object"!=i(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==i(e)?e:e+""}var c=function(){return t=function t(e,n){var r=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),a(this,"toggleButtonState",(function(){r._hasInvalidInput()?r.disableButton():(r._submitButton.classList.remove(r._settings.inactiveButtonClass),r._submitButton.disabled=!1)})),a(this,"disableButton",(function(){r._submitButton.classList.add(r._settings.inactiveButtonClass),r._submitButton.disabled=!0})),this._settings=e,this._formElement=n,this._inputList=Array.from(this._formElement.querySelectorAll(this._settings.inputSelector)),this._submitButton=this._formElement.querySelector(this._settings.submitButtonSelector)},(e=[{key:"enableValidation",value:function(){this._setEventListeners()}},{key:"_setEventListeners",value:function(){var t=this;this._inputList.forEach((function(e){e.addEventListener("input",(function(){t._checkInputValidity(e),t.toggleButtonState()}))})),this.toggleButtonState()}},{key:"_checkInputValidity",value:function(t){t.validity.valid?this._hideInputError(t):this._showInputError(t,t.validationMessage)}},{key:"_showInputError",value:function(t,e){var n=this._formElement.querySelector("#".concat(t.id,"-error"));t.classList.add(this._settings.inputErrorClass),n.textContent=e,n.classList.add(this._settings.errorClass)}},{key:"_hideInputError",value:function(t){var e=this._formElement.querySelector("#".concat(t.id,"-error"));t.classList.remove(this._settings.inputErrorClass),e.classList.remove(this._settings.errorClass),e.textContent=""}},{key:"_hasInvalidInput",value:function(){return this._inputList.some((function(t){return!t.validity.valid}))}},{key:"resetValidation",value:function(){var t=this;this._inputList.forEach((function(e){t._hideInputError(e)})),this.toggleButtonState()}}])&&u(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}(),s=c;function f(t){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},f(t)}function p(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,m(r.key),r)}}function m(t){var e=function(t){if("object"!=f(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=f(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==f(e)?e:e+""}var y=function(){return t=function t(e,n){var r=e.items,o=e.renderer;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._items=r,this.renderer=o,this._container=document.querySelector(n)},(e=[{key:"renderItems",value:function(){var t=this;this._items.forEach((function(e){t.renderer(e)}))}},{key:"addItem",value:function(t){this._container.prepend(t)}}])&&p(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function b(t){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},b(t)}function v(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,d(r.key),r)}}function d(t){var e=function(t){if("object"!=b(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=b(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==b(e)?e:e+""}var h=function(){return t=function t(e){var n=e.popupSelector;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._popupElement=document.querySelector(n),this._handleEscClose=this._handleEscClose.bind(this)},(e=[{key:"open",value:function(){this._popupElement.classList.add("modal_opened"),document.addEventListener("keydown",this._handleEscClose)}},{key:"close",value:function(){this._popupElement.classList.remove("modal_opened"),document.removeEventListener("keydown",this._handleEscClose)}},{key:"_handleEscClose",value:function(t){"Escape"===t.key&&this.close()}},{key:"setEventListeners",value:function(){var t=this;this._popupElement.addEventListener("mousedown",(function(e){(e.target.classList.contains("modal__overlay")||e.target.classList.contains("modal__close"))&&t.close()}))}}])&&v(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function _(t){return _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_(t)}function g(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,w(r.key),r)}}function w(t){var e=function(t){if("object"!=_(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=_(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==_(e)?e:e+""}function S(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(S=function(){return!!t})()}function E(){return E="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!{}.hasOwnProperty.call(t,e)&&null!==(t=j(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},E.apply(null,arguments)}function j(t){return j=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},j(t)}function k(t,e){return k=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},k(t,e)}var O=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=function(t,e,n){return e=j(e),function(t,e){if(e&&("object"==_(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,S()?Reflect.construct(e,n||[],j(t).constructor):e.apply(t,n))}(this,e,[{popupSelector:t}]))._imageElement=n._popupElement.querySelector(".modal__preview-image"),n._captionElement=n._popupElement.querySelector(".modal__preview-caption"),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&k(t,e)}(e,t),n=e,r=[{key:"open",value:function(t){var n,r,o,i=t.name,u=t.link;this._imageElement.src=u,this._imageElement.alt=i,this._captionElement.textContent=i,(n=e,r=this,"function"==typeof(o=E(j(1&3?n.prototype:n),"open",r))?function(t){return o.apply(r,t)}:o)([])}}],r&&g(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(h);function P(t){return P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},P(t)}function L(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,B(r.key),r)}}function B(t){var e=function(t){if("object"!=P(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=P(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==P(e)?e:e+""}function C(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(C=function(){return!!t})()}function I(){return I="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!{}.hasOwnProperty.call(t,e)&&null!==(t=q(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},I.apply(null,arguments)}function q(t){return q=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},q(t)}function T(t,e){return T=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},T(t,e)}var R=function(t){function e(t,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=function(t,e,n){return e=q(e),function(t,e){if(e&&("object"==P(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,C()?Reflect.construct(e,n||[],q(t).constructor):e.apply(t,n))}(this,e,[{popupSelector:t}]))._handleFormSubmit=n,r._popupForm=r._popupElement.querySelector(".modal__form"),r._inputList=r._popupForm.querySelectorAll(".modal__input"),r.setEventListeners(),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&T(t,e)}(e,t),n=e,r=[{key:"getForm",value:function(){return this._popupForm}},{key:"_getInputValues",value:function(){var t={};return this._inputList.forEach((function(e){t[e.name]=e.value})),t}},{key:"setInputValues",value:function(t){this._inputList.forEach((function(e){e.value=t[e.name]}))}},{key:"setEventListeners",value:function(){var t,n,r,o=this;this._popupForm.addEventListener("submit",(function(t){t.preventDefault(),o._handleFormSubmit(o._getInputValues()),o._popupForm.reset(),o.close()})),(t=e,n=this,"function"==typeof(r=I(q(1&3?t.prototype:t),"setEventListeners",n))?function(t){return r.apply(n,t)}:r)([])}}],r&&L(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(h);function V(t){return V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},V(t)}function F(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,x(r.key),r)}}function x(t){var e=function(t){if("object"!=V(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=V(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==V(e)?e:e+""}var A=new(function(){return t=function t(e){var n=e.nameSelector,r=e.jobSelector;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._nameElement=document.querySelector(n),this._jobElement=document.querySelector(r)},(e=[{key:"getUserInfo",value:function(){return{name:this._nameElement.textContent,job:this._jobElement.textContent}}},{key:"setUserInfo",value:function(t){var e=t.name,n=t.job;this._nameElement.textContent=e,this._jobElement.textContent=n}}])&&F(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}())({nameSelector:".profile__title",jobSelector:".profile__description"}),D=new R("#profile-edit-modal",(function(t){A.setUserInfo({name:t.title,job:t.description}),D.close();var e=D.getForm().getAttribute("name");$[e].disableButton()}));document.querySelector("#profile-edit-button").addEventListener("click",(function(){var t=A.getUserInfo(),e=t.name,n=t.job;D.setInputValues({title:e,description:n}),D.open();var r=D.getForm().getAttribute("name");$[r].resetValidation()}));var z=new R("#profile-add-modal",(function(t){var e={name:t.title,link:t.link},n=z.getForm().getAttribute("name"),r=$[n];N.renderer(e),z.close(),r.disableButton()}));document.querySelector(".profile__add-button").addEventListener("click",(function(){z.open()}));var U=new O("#preview-modal");function M(t,e){U.open({name:e,link:t})}U.setEventListeners();var N=new y({items:[{name:"Yosemite Valley",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/yosemite.jpg"},{name:"Lake Louise",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lake-louise.jpg"},{name:"Bald Mountains",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/bald-mountains.jpg"},{name:"Latemar",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/latemar.jpg"},{name:"Vanoise National Park",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/vanoise.jpg"},{name:"Lago di Braies",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lago.jpg"}],renderer:function(t){var e=new o(t,"#card-form",M).createCard();N.addItem(e)}},".card__list");N.renderItems();var Y,$={};Y={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__button",inactiveButtonClass:"modal__button_disabled",inputErrorClass:"modal__input_has-error",errorClass:"modal__error_visible"},Array.from(document.querySelectorAll(Y.formSelector)).forEach((function(t){var e=new s(Y,t),n=t.getAttribute("name");$[n]=e,e.enableValidation()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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VSxJQUFJN0QsRUFBUSxDQUFFRSxNRXRHRixDQUMxQixDQUNFckUsS0FBTSxrQkFDTkMsS0FBTSxzR0FFUixDQUNFRCxLQUFNLGNBQ05DLEtBQU0seUdBRVIsQ0FDRUQsS0FBTSxpQkFDTkMsS0FBTSw0R0FFUixDQUNFRCxLQUFNLFVBQ05DLEtBQU0scUdBRVIsQ0FDRUQsS0FBTSx3QkFDTkMsS0FBTSxxR0FFUixDQUNFRCxLQUFNLGlCQUNOQyxLQUFNLG1HRitFeUNxRSxTQUxsQyxTQUFDd0QsR0FDaEIsSUFBTUksRUFKYyxJQUFJdEksRUFJT2tJLEVBSkksYUFBYy9ILEdBQzlCb0ksYUFJbkJILEVBQVFJLFFBQVFGLEVBQ2xCLEdBRStELGVBRS9ERixFQUFRSyxjQUlSLElBRTBCckcsRUFGcEJ1RixFQUFpQixDQUFDLEVBRUV2RixFRWpGRixDQUN0QnNHLGFBQWMsZUFDZHZGLGNBQWUsZ0JBQ2ZDLHFCQUFzQixpQkFDdEJULG9CQUFxQix5QkFDckJ3QixnQkFBaUIseUJBQ2pCQyxXQUFZLHdCRjRFS3BCLE1BQU1DLEtBQUtuQyxTQUFTb0MsaUJBQWlCZCxFQUFTc0csZUFDdERwRixTQUFRLFNBQUNqQixHQUNoQixJQUFNOEYsRUFBWSxJQUFJaEcsRUFBY0MsRUFBVUMsR0FDeENtRixFQUFXbkYsRUFBWXFGLGFBQWEsUUFFMUNDLEVBQWVILEdBQVlXLEVBQzNCQSxFQUFVUSxrQkFDWixHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvcGFnZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL3V0aWxzL2NvbnN0YW50cy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjbGFzcyBDYXJkIHtcbiAgY29uc3RydWN0b3IoeyBuYW1lLCBsaW5rIH0sIGNhcmRTZWxlY3RvciwgaGFuZGxlSW1hZ2VDbGljaykge1xuICAgIHRoaXMuX25hbWUgPSBuYW1lO1xuICAgIHRoaXMuX2xpbmsgPSBsaW5rO1xuICAgIHRoaXMuX2NhcmRTZWxlY3RvciA9IGNhcmRTZWxlY3RvcjtcbiAgICB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrID0gaGFuZGxlSW1hZ2VDbGljaztcbiAgfVxuXG4gIF9nZXRUZW1wbGF0ZSgpIHtcbiAgICBjb25zdCBjYXJkRWxlbWVudCA9IGRvY3VtZW50XG4gICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl9jYXJkU2VsZWN0b3IpXG4gICAgICAuY29udGVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRcIilcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XG5cbiAgICByZXR1cm4gY2FyZEVsZW1lbnQ7XG4gIH1cblxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fbGlrZUJ1dHRvbiA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saWtlLWJ1dHRvblwiKTtcbiAgICB0aGlzLl9jYXJkSW1hZ2UgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIik7XG4gICAgdGhpcy5fdHJhc2hCdXR0b24gPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fZGVsZXRlLWJ1dHRvblwiKTtcblxuICAgIGlmICh0aGlzLl9saWtlQnV0dG9uKSB7XG4gICAgICB0aGlzLl9saWtlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuX2hhbmRsZUxpa2VCdXR0b24oKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGlmICh0aGlzLl9jYXJkSW1hZ2UpIHtcbiAgICAgIHRoaXMuX2NhcmRJbWFnZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrKHRoaXMuX2xpbmssIHRoaXMuX25hbWUpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX3RyYXNoQnV0dG9uKSB7XG4gICAgICB0aGlzLl90cmFzaEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICB0aGlzLl9oYW5kbGVEZWxldGVCdXR0b24oKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIF9oYW5kbGVMaWtlQnV0dG9uKCkge1xuICAgIHRoaXMuX2xpa2VCdXR0b24uY2xhc3NMaXN0LnRvZ2dsZShcImNhcmRfX2xpa2UtYnV0dG9uX2FjdGl2ZVwiKTtcbiAgfVxuXG4gIF9oYW5kbGVEZWxldGVCdXR0b24oKSB7XG4gICAgdGhpcy5fZWxlbWVudC5yZW1vdmUoKTtcbiAgICB0aGlzLl9lbGVtZW50ID0gbnVsbDtcbiAgfVxuXG4gIGNyZWF0ZUNhcmQoKSB7XG4gICAgdGhpcy5fZWxlbWVudCA9IHRoaXMuX2dldFRlbXBsYXRlKCk7XG4gICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3RpdGxlXCIpLnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcbiAgICBjb25zdCBjYXJkSW1hZ2UgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIik7XG5cbiAgICBjYXJkSW1hZ2Uuc3JjID0gdGhpcy5fbGluaztcbiAgICBjYXJkSW1hZ2UuYWx0ID0gdGhpcy5fbmFtZTtcblxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG5cbiAgICByZXR1cm4gdGhpcy5fZWxlbWVudDtcbiAgfVxuICAkO1xufVxuZXhwb3J0IGRlZmF1bHQgQ2FyZDtcbiIsImNsYXNzIEZvcm1WYWxpZGF0b3Ige1xuICBjb25zdHJ1Y3RvcihzZXR0aW5ncywgZm9ybUVsZW1lbnQpIHtcbiAgICB0aGlzLl9zZXR0aW5ncyA9IHNldHRpbmdzO1xuICAgIHRoaXMuX2Zvcm1FbGVtZW50ID0gZm9ybUVsZW1lbnQ7XG4gICAgdGhpcy5faW5wdXRMaXN0ID0gQXJyYXkuZnJvbShcbiAgICAgIHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5fc2V0dGluZ3MuaW5wdXRTZWxlY3RvcilcbiAgICApO1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbiA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICB0aGlzLl9zZXR0aW5ncy5zdWJtaXRCdXR0b25TZWxlY3RvclxuICAgICk7XG4gIH1cblxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG4gIH1cbiAgLy9UT0dHTEUgU1RBVEUgQlVUVE9OXG4gIHRvZ2dsZUJ1dHRvblN0YXRlID0gKCkgPT4ge1xuICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQoKSkge1xuICAgICAgdGhpcy5kaXNhYmxlQnV0dG9uKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX3NldHRpbmdzLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLmRpc2FibGVkID0gZmFsc2U7XG4gICAgfVxuICB9O1xuXG4gIC8vIERJU0FCTEUgQlVUVE9OIEZVTkNUSU9OXG4gIGRpc2FibGVCdXR0b24gPSAoKSA9PiB7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5hZGQodGhpcy5fc2V0dGluZ3MuaW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcbiAgfTtcblxuICAvL0VWRU5UIExJU1RFTkVSUyBJTlBVVCBBTkQgQlVUVE9OIFNUQVRFXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcbiAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCk7XG4gICAgICAgIHRoaXMudG9nZ2xlQnV0dG9uU3RhdGUoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgdGhpcy50b2dnbGVCdXR0b25TdGF0ZSgpO1xuICB9XG5cbiAgLy9DSEVDSyBJTlBVVCBWQUxJRElUWVxuICBfY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCkge1xuICAgIGlmICghaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKSB7XG4gICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQsIGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XG4gICAgfVxuICB9XG5cbiAgLy9TSE9XIElOUFVUIEVSUk9SIE1FU1NBR0VcbiAgX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCwgZXJyb3JNZXNzYWdlKSB7XG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIGAjJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYFxuICAgICk7XG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fc2V0dGluZ3MuaW5wdXRFcnJvckNsYXNzKTtcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBlcnJvck1lc3NhZ2U7XG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fc2V0dGluZ3MuZXJyb3JDbGFzcyk7XG4gIH1cblxuICAvL0hJREUgRVJST1IgTUVTU0FHRVxuICBfaGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIGAjJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYFxuICAgICk7XG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fc2V0dGluZ3MuaW5wdXRFcnJvckNsYXNzKTtcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9zZXR0aW5ncy5lcnJvckNsYXNzKTtcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBcIlwiO1xuICB9XG5cbiAgLy9DSEVDSyBJTlZBTElEIElOUFVUXG4gIF9oYXNJbnZhbGlkSW5wdXQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2lucHV0TGlzdC5zb21lKChpbnB1dEVsZW1lbnQpID0+ICFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpO1xuICB9XG5cbiAgLy9SRVNFVCBWQUxJREFUSU9OIEZPUk1cbiAgcmVzZXRWYWxpZGF0aW9uKCkge1xuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XG4gICAgfSk7XG4gICAgdGhpcy50b2dnbGVCdXR0b25TdGF0ZSgpO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IEZvcm1WYWxpZGF0b3I7XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcbiAgY29uc3RydWN0b3IoeyBpdGVtcywgcmVuZGVyZXIgfSwgY29udGFpbmVyU2VsZWN0b3IpIHtcbiAgICB0aGlzLl9pdGVtcyA9IGl0ZW1zO1xuICAgIHRoaXMucmVuZGVyZXIgPSByZW5kZXJlcjtcbiAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lclNlbGVjdG9yKTtcbiAgfVxuXG4gIHJlbmRlckl0ZW1zKCkge1xuICAgIHRoaXMuX2l0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHtcbiAgICAgIHRoaXMucmVuZGVyZXIoaXRlbSk7XG4gICAgfSk7XG4gIH1cblxuICBhZGRJdGVtKGVsZW1lbnQpIHtcbiAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChlbGVtZW50KTtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcih7IHBvcHVwU2VsZWN0b3IgfSkge1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy5faGFuZGxlRXNjQ2xvc2UgPSB0aGlzLl9oYW5kbGVFc2NDbG9zZS5iaW5kKHRoaXMpO1xuICB9XG5cbiAgb3BlbigpIHtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcIm1vZGFsX29wZW5lZFwiKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gIH1cblxuICBjbG9zZSgpIHtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcIm1vZGFsX29wZW5lZFwiKTtcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gIH1cblxuICBfaGFuZGxlRXNjQ2xvc2UoZXZlbnQpIHtcbiAgICBpZiAoZXZlbnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfVxuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgKGV2ZW50KSA9PiB7XG4gICAgICBpZiAoXG4gICAgICAgIGV2ZW50LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJtb2RhbF9fb3ZlcmxheVwiKSB8fFxuICAgICAgICBldmVudC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwibW9kYWxfX2Nsb3NlXCIpXG4gICAgICApIHtcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG59XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXBcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcbiAgICBzdXBlcih7IHBvcHVwU2VsZWN0b3IgfSk7XG4gICAgdGhpcy5faW1hZ2VFbGVtZW50ID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBcIi5tb2RhbF9fcHJldmlldy1pbWFnZVwiXG4gICAgKTtcblxuICAgIHRoaXMuX2NhcHRpb25FbGVtZW50ID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBcIi5tb2RhbF9fcHJldmlldy1jYXB0aW9uXCJcbiAgICApO1xuICB9XG4gIG9wZW4oeyBuYW1lLCBsaW5rIH0pIHtcbiAgICB0aGlzLl9pbWFnZUVsZW1lbnQuc3JjID0gbGluaztcbiAgICB0aGlzLl9pbWFnZUVsZW1lbnQuYWx0ID0gbmFtZTtcbiAgICB0aGlzLl9jYXB0aW9uRWxlbWVudC50ZXh0Q29udGVudCA9IG5hbWU7XG4gICAgc3VwZXIub3BlbigpO1xuICB9XG59XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgaGFuZGxlRm9ybVN1Ym1pdCkge1xuICAgIHN1cGVyKHsgcG9wdXBTZWxlY3RvciB9KTtcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlRm9ybVN1Ym1pdDtcbiAgICB0aGlzLl9wb3B1cEZvcm0gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcbiAgICB0aGlzLl9pbnB1dExpc3QgPSB0aGlzLl9wb3B1cEZvcm0ucXVlcnlTZWxlY3RvckFsbChcIi5tb2RhbF9faW5wdXRcIik7XG4gICAgLy90aGlzLl9mb3JtVmFsaWRhdG9yID0gZm9ybVZhbGlkYXRvcjtcbiAgICB0aGlzLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gIH1cblxuICBnZXRGb3JtKCkge1xuICAgIHJldHVybiB0aGlzLl9wb3B1cEZvcm07XG4gIH1cblxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XG4gICAgY29uc3QgZm9ybVZhbHVlcyA9IHt9O1xuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dCkgPT4ge1xuICAgICAgZm9ybVZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xuICAgIH0pO1xuICAgIC8vY29uc29sZS5sb2coXCJDYXB0dXJlZCBmb3JtIHZhbHVlczpcIiwgZm9ybVZhbHVlcyk7XG4gICAgcmV0dXJuIGZvcm1WYWx1ZXM7XG4gIH1cblxuICBzZXRJbnB1dFZhbHVlcyhkYXRhKSB7XG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XG4gICAgICBpbnB1dC52YWx1ZSA9IGRhdGFbaW5wdXQubmFtZV07XG4gICAgfSk7XG4gIH1cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fcG9wdXBGb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4ge1xuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KHRoaXMuX2dldElucHV0VmFsdWVzKCkpO1xuICAgICAgdGhpcy5fcG9wdXBGb3JtLnJlc2V0KCk7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfSk7XG5cbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xuICB9XG59XG4iLCIvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG4vKiAgICAgICAgICAgICAgICAgICAgIE1vZHVsZXNcbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cbmltcG9ydCBcIi4uL3BhZ2VzL2luZGV4LmNzc1wiO1xuaW1wb3J0IENhcmQgZnJvbSBcIi4uL2NvbXBvbmVudHMvQ2FyZC5qc1wiO1xuaW1wb3J0IHsgaW5pdGlhbENhcmRzIH0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xuaW1wb3J0IHsgc2V0dGluZ3MgfSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzLmpzXCI7XG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XG5pbXBvcnQgU2VjdGlvbiBmcm9tIFwiLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanNcIjtcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi4vY29tcG9uZW50cy9Vc2VySW5mby5qc1wiO1xuXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG4vKiAgICAgICAgICAgICAgICAgIENhcmQgVGVtcGxhdGUgXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5jb25zdCBjYXJkRGF0YSA9IHtcbiAgbmFtZTogXCJZb3NlbWl0ZSBWYWxsZXlcIixcbiAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L3lvc2VtaXRlLmpwZ1wiLFxufTtcblxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuLyogICAgICAgICAgICAgICAgICAgICBVc2VyIEluZm8gXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5jb25zdCB1c2VySW5mbyA9IG5ldyBVc2VySW5mbyh7XG4gIG5hbWVTZWxlY3RvcjogXCIucHJvZmlsZV9fdGl0bGVcIixcbiAgam9iU2VsZWN0b3I6IFwiLnByb2ZpbGVfX2Rlc2NyaXB0aW9uXCIsXG59KTtcblxuLy8gLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuLy8gLyogICAgICAgICAgICAgICAgIFByb2ZpbGUgRWRpdCBGb3JtXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cbmNvbnN0IHByb2ZpbGVFZGl0UG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShcbiAgXCIjcHJvZmlsZS1lZGl0LW1vZGFsXCIsXG4gIChmb3JtVmFsdWVzKSA9PiB7XG4gICAgdXNlckluZm8uc2V0VXNlckluZm8oe1xuICAgICAgbmFtZTogZm9ybVZhbHVlcy50aXRsZSxcbiAgICAgIGpvYjogZm9ybVZhbHVlcy5kZXNjcmlwdGlvbixcbiAgICB9KTtcblxuICAgIHByb2ZpbGVFZGl0UG9wdXAuY2xvc2UoKTtcbiAgICBjb25zdCBmb3JtTmFtZSA9IHByb2ZpbGVFZGl0UG9wdXAuZ2V0Rm9ybSgpLmdldEF0dHJpYnV0ZShcIm5hbWVcIik7XG4gICAgY29uc3QgdmFsaWRhdG9yID0gZm9ybVZhbGlkYXRvcnNbZm9ybU5hbWVdO1xuICAgIHZhbGlkYXRvci5kaXNhYmxlQnV0dG9uKCk7XG4gIH1cbik7XG5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtZWRpdC1idXR0b25cIikuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgY29uc3QgeyBuYW1lLCBqb2IgfSA9IHVzZXJJbmZvLmdldFVzZXJJbmZvKCk7XG5cbiAgcHJvZmlsZUVkaXRQb3B1cC5zZXRJbnB1dFZhbHVlcyh7XG4gICAgdGl0bGU6IG5hbWUsXG4gICAgZGVzY3JpcHRpb246IGpvYixcbiAgfSk7XG5cbiAgcHJvZmlsZUVkaXRQb3B1cC5vcGVuKCk7XG4gIGNvbnN0IGZvcm1OYW1lID0gcHJvZmlsZUVkaXRQb3B1cC5nZXRGb3JtKCkuZ2V0QXR0cmlidXRlKFwibmFtZVwiKTtcbiAgY29uc3QgdmFsaWRhdG9yID0gZm9ybVZhbGlkYXRvcnNbZm9ybU5hbWVdO1xuICB2YWxpZGF0b3IucmVzZXRWYWxpZGF0aW9uKCk7XG59KTtcblxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuLyogICAgICAgICAgICAgICAgIEFkZCBDYXJkL0ltYWdlIEZvcm0gXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5jb25zdCBhZGRDYXJkRm9ybVBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oXG4gIFwiI3Byb2ZpbGUtYWRkLW1vZGFsXCIsXG4gIChmb3JtVmFsdWVzKSA9PiB7XG4gICAgY29uc3QgY2FyZFRpdGxlID0gZm9ybVZhbHVlcy50aXRsZTtcbiAgICBjb25zdCBjYXJkTGluayA9IGZvcm1WYWx1ZXMubGluaztcblxuICAgIGNvbnN0IGNhcmREYXRhID0geyBuYW1lOiBjYXJkVGl0bGUsIGxpbms6IGNhcmRMaW5rIH07XG5cbiAgICBjb25zdCBmb3JtTmFtZSA9IGFkZENhcmRGb3JtUG9wdXAuZ2V0Rm9ybSgpLmdldEF0dHJpYnV0ZShcIm5hbWVcIik7XG4gICAgY29uc3QgdmFsaWRhdG9yID0gZm9ybVZhbGlkYXRvcnNbZm9ybU5hbWVdO1xuXG4gICAgc2VjdGlvbi5yZW5kZXJlcihjYXJkRGF0YSk7XG4gICAgYWRkQ2FyZEZvcm1Qb3B1cC5jbG9zZSgpO1xuICAgIHZhbGlkYXRvci5kaXNhYmxlQnV0dG9uKCk7IC8vZGlzYWJsZSBjcmVhdGUgYnV0dG9uIGFnYWluIGFmdGVyIHN1Ym1pc3Npb25cbiAgfVxuKTtcblxuZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hZGQtYnV0dG9uXCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIGFkZENhcmRGb3JtUG9wdXAub3BlbigpO1xufSk7XG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG4vKiAgICAgICAgICAgICAgICAgUHJldmlldyBJbWFnZSBQb3B1cCBcbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cbmNvbnN0IGltYWdlUG9wdXAgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoXCIjcHJldmlldy1tb2RhbFwiKTtcbmltYWdlUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuZnVuY3Rpb24gaGFuZGxlSW1hZ2VDbGljayhsaW5rLCBuYW1lKSB7XG4gIGltYWdlUG9wdXAub3Blbih7IG5hbWUsIGxpbmsgfSk7XG59XG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG4vKiAgICAgICAgICAgICAgICAgUmVuZGVyIENhcmRzL0ltYWdlIFxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuZnVuY3Rpb24gY3JlYXRlQ2FyZChpdGVtKSB7XG4gIGNvbnN0IGNhcmRFbGVtZW50ID0gbmV3IENhcmQoaXRlbSwgXCIjY2FyZC1mb3JtXCIsIGhhbmRsZUltYWdlQ2xpY2spO1xuICByZXR1cm4gY2FyZEVsZW1lbnQuY3JlYXRlQ2FyZCgpO1xufVxuY29uc3QgcmVuZGVyZXIgPSAoY2FyZERhdGEpID0+IHtcbiAgY29uc3QgY2FyZEVsZW1lbnQgPSBjcmVhdGVDYXJkKGNhcmREYXRhKTtcbiAgc2VjdGlvbi5hZGRJdGVtKGNhcmRFbGVtZW50KTtcbn07XG5cbmNvbnN0IHNlY3Rpb24gPSBuZXcgU2VjdGlvbih7IGl0ZW1zOiBpbml0aWFsQ2FyZHMsIHJlbmRlcmVyIH0sIFwiLmNhcmRfX2xpc3RcIik7XG4vL2NvbnNvbGUubG9nKGluaXRpYWxDYXJkcyk7XG5zZWN0aW9uLnJlbmRlckl0ZW1zKCk7XG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG4vKiAgICAgICAgICAgICAgICAgICAgIEZvcm0gVmFsaWRhdGlvblxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuY29uc3QgZm9ybVZhbGlkYXRvcnMgPSB7fTtcblxuY29uc3QgZW5hYmxlVmFsaWRhdGlvbiA9IChzZXR0aW5ncykgPT4ge1xuICBjb25zdCBmb3JtTGlzdCA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChzZXR0aW5ncy5mb3JtU2VsZWN0b3IpKTtcbiAgZm9ybUxpc3QuZm9yRWFjaCgoZm9ybUVsZW1lbnQpID0+IHtcbiAgICBjb25zdCB2YWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihzZXR0aW5ncywgZm9ybUVsZW1lbnQpO1xuICAgIGNvbnN0IGZvcm1OYW1lID0gZm9ybUVsZW1lbnQuZ2V0QXR0cmlidXRlKFwibmFtZVwiKTtcblxuICAgIGZvcm1WYWxpZGF0b3JzW2Zvcm1OYW1lXSA9IHZhbGlkYXRvcjtcbiAgICB2YWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuICB9KTtcbn07XG5cbmVuYWJsZVZhbGlkYXRpb24oc2V0dGluZ3MpO1xuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlckluZm8ge1xuICBjb25zdHJ1Y3Rvcih7IG5hbWVTZWxlY3Rvciwgam9iU2VsZWN0b3IgfSkge1xuICAgIHRoaXMuX25hbWVFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihuYW1lU2VsZWN0b3IpO1xuICAgIHRoaXMuX2pvYkVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGpvYlNlbGVjdG9yKTtcbiAgICAvL2NvbnNvbGUubG9nKHRoaXMuX25hbWVFbGVtZW50LCB0aGlzLl9qb2JFbGVtZW50KTtcbiAgfVxuXG4gIGdldFVzZXJJbmZvKCkge1xuICAgIHJldHVybiB7XG4gICAgICBuYW1lOiB0aGlzLl9uYW1lRWxlbWVudC50ZXh0Q29udGVudCxcbiAgICAgIGpvYjogdGhpcy5fam9iRWxlbWVudC50ZXh0Q29udGVudCxcbiAgICB9O1xuICB9XG5cbiAgc2V0VXNlckluZm8oeyBuYW1lLCBqb2IgfSkge1xuICAgIC8vY29uc29sZS5sb2codGhpcy5zZXRVc2VySW5mbyk7XG4gICAgdGhpcy5fbmFtZUVsZW1lbnQudGV4dENvbnRlbnQgPSBuYW1lO1xuICAgIHRoaXMuX2pvYkVsZW1lbnQudGV4dENvbnRlbnQgPSBqb2I7XG4gIH1cbn1cbiIsIi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cbi8qICAgICAgICAgICAgICAgICAgIEluaXRpYWwgQ2FyZHNcbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cbmV4cG9ydCBjb25zdCBpbml0aWFsQ2FyZHMgPSBbXG4gIHtcbiAgICBuYW1lOiBcIllvc2VtaXRlIFZhbGxleVwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC95b3NlbWl0ZS5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiTGFrZSBMb3Vpc2VcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGFrZS1sb3Vpc2UuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkJhbGQgTW91bnRhaW5zXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2JhbGQtbW91bnRhaW5zLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJMYXRlbWFyXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xhdGVtYXIuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIlZhbm9pc2UgTmF0aW9uYWwgUGFya1wiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC92YW5vaXNlLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJMYWdvIGRpIEJyYWllc1wiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYWdvLmpwZ1wiLFxuICB9LFxuXTtcbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cbi8qICAgICAgICAgICAgICAgICAgICAgRm9ybSBWYWxpZGF0aW9uIFxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuZXhwb3J0IGNvbnN0IHNldHRpbmdzID0ge1xuICBmb3JtU2VsZWN0b3I6IFwiLm1vZGFsX19mb3JtXCIsXG4gIGlucHV0U2VsZWN0b3I6IFwiLm1vZGFsX19pbnB1dFwiLFxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIubW9kYWxfX2J1dHRvblwiLFxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcIm1vZGFsX19idXR0b25fZGlzYWJsZWRcIixcbiAgaW5wdXRFcnJvckNsYXNzOiBcIm1vZGFsX19pbnB1dF9oYXMtZXJyb3JcIixcbiAgZXJyb3JDbGFzczogXCJtb2RhbF9fZXJyb3JfdmlzaWJsZVwiLFxufTtcbiJdLCJuYW1lcyI6WyJDYXJkIiwiX3JlZiIsImNhcmRTZWxlY3RvciIsImhhbmRsZUltYWdlQ2xpY2siLCJuYW1lIiwibGluayIsIl9jbGFzc0NhbGxDaGVjayIsInRoaXMiLCJfbmFtZSIsIl9saW5rIiwiX2NhcmRTZWxlY3RvciIsIl9oYW5kbGVJbWFnZUNsaWNrIiwia2V5IiwidmFsdWUiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiX3RoaXMiLCJfbGlrZUJ1dHRvbiIsIl9lbGVtZW50IiwiX2NhcmRJbWFnZSIsIl90cmFzaEJ1dHRvbiIsImFkZEV2ZW50TGlzdGVuZXIiLCJfaGFuZGxlTGlrZUJ1dHRvbiIsIl9oYW5kbGVEZWxldGVCdXR0b24iLCJjbGFzc0xpc3QiLCJ0b2dnbGUiLCJyZW1vdmUiLCJfZ2V0VGVtcGxhdGUiLCJ0ZXh0Q29udGVudCIsImNhcmRJbWFnZSIsInNyYyIsImFsdCIsIl9zZXRFdmVudExpc3RlbmVycyIsIkZvcm1WYWxpZGF0b3IiLCJzZXR0aW5ncyIsImZvcm1FbGVtZW50IiwiX2RlZmluZVByb3BlcnR5IiwiX2hhc0ludmFsaWRJbnB1dCIsImRpc2FibGVCdXR0b24iLCJfc3VibWl0QnV0dG9uIiwiX3NldHRpbmdzIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsImRpc2FibGVkIiwiYWRkIiwiX2Zvcm1FbGVtZW50IiwiX2lucHV0TGlzdCIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJpbnB1dFNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfdGhpczIiLCJmb3JFYWNoIiwiaW5wdXRFbGVtZW50IiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsInRvZ2dsZUJ1dHRvblN0YXRlIiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9oaWRlSW5wdXRFcnJvciIsIl9zaG93SW5wdXRFcnJvciIsInZhbGlkYXRpb25NZXNzYWdlIiwiZXJyb3JNZXNzYWdlIiwiZXJyb3JFbGVtZW50IiwiY29uY2F0IiwiaWQiLCJpbnB1dEVycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwic29tZSIsIl90aGlzMyIsIlNlY3Rpb24iLCJjb250YWluZXJTZWxlY3RvciIsIml0ZW1zIiwicmVuZGVyZXIiLCJfaXRlbXMiLCJfY29udGFpbmVyIiwiaXRlbSIsImVsZW1lbnQiLCJwcmVwZW5kIiwiUG9wdXAiLCJwb3B1cFNlbGVjdG9yIiwiX3BvcHVwRWxlbWVudCIsIl9oYW5kbGVFc2NDbG9zZSIsImJpbmQiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZXZlbnQiLCJjbG9zZSIsInRhcmdldCIsImNvbnRhaW5zIiwiUG9wdXBXaXRoSW1hZ2UiLCJfUG9wdXAiLCJfY2FsbFN1cGVyIiwiX2ltYWdlRWxlbWVudCIsIl9jYXB0aW9uRWxlbWVudCIsIl9pbmhlcml0cyIsIlBvcHVwV2l0aEZvcm0iLCJoYW5kbGVGb3JtU3VibWl0IiwiX2hhbmRsZUZvcm1TdWJtaXQiLCJfcG9wdXBGb3JtIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJmb3JtVmFsdWVzIiwiaW5wdXQiLCJkYXRhIiwiZXZ0IiwicHJldmVudERlZmF1bHQiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJyZXNldCIsInVzZXJJbmZvIiwiVXNlckluZm8iLCJuYW1lU2VsZWN0b3IiLCJqb2JTZWxlY3RvciIsIl9uYW1lRWxlbWVudCIsIl9qb2JFbGVtZW50Iiwiam9iIiwiX3JlZjIiLCJwcm9maWxlRWRpdFBvcHVwIiwic2V0VXNlckluZm8iLCJ0aXRsZSIsImRlc2NyaXB0aW9uIiwiZm9ybU5hbWUiLCJnZXRGb3JtIiwiZ2V0QXR0cmlidXRlIiwiZm9ybVZhbGlkYXRvcnMiLCJfdXNlckluZm8kZ2V0VXNlckluZm8iLCJnZXRVc2VySW5mbyIsInNldElucHV0VmFsdWVzIiwib3BlbiIsInJlc2V0VmFsaWRhdGlvbiIsImFkZENhcmRGb3JtUG9wdXAiLCJjYXJkRGF0YSIsInZhbGlkYXRvciIsInNlY3Rpb24iLCJpbWFnZVBvcHVwIiwiY2FyZEVsZW1lbnQiLCJjcmVhdGVDYXJkIiwiYWRkSXRlbSIsInJlbmRlckl0ZW1zIiwiZm9ybVNlbGVjdG9yIiwiZW5hYmxlVmFsaWRhdGlvbiJdLCJzb3VyY2VSb290IjoiIn0=